webpackJsonp([2,13],{194:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(195),o=a(l),r=i(222),s=a(r),u=i(263),h=a(u),d=i(262),c=a(d),p=i(278),f=a(p),m=i(279),g=a(m),y=i(284),v=a(y),C=i(285),b=a(C),S=i(286),I=a(S),_=i(287),x=a(_),E=i(291),N=a(E),T=i(292),O=a(T);n.default={tel:o.default,number:s.default,attachment:h.default,picAttachment:c.default,separator:f.default,commodity:g.default,staticText:v.default,staticPic:b.default,company:I.default,department:I.default,position:I.default,city:x.default,location:x.default,address:N.default,wechat:O.default},t.exports=n["default"]},278:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(20),o=a(l),r=i(19),s=a(r),u=i(118),h=a(u),d=i(23),c=a(d),p=i(17),f=["","left","center","right"],m=["","dotted","dashed","solid","double"],g=o.default.createClass({displayName:"Separator",mixins:[h.default,c.default],getInitialState:function(){return this.theme=(0,p.getThemeHelper)(),{}},render:function(){var t=this.props,n=t.data,i=t.style,a=_.assign({textAlign:f[n.titleAlign]},this.theme.getComponentTitleStyle()),l=_.assign({textAlign:f[n.subTitleAlign]},this.theme.getComponentDescStyle()),r=null;return n.isNoPadding&&(r={marginLeft:0,marginRight:0}),o.default.createElement("div",{className:(0,s.default)("fb_component","fb_staticComponent",n.type),id:n.id,style:i},this.renderTitle(a,{htmlEntityMode:!0}),o.default.createElement("hr",{className:"fbc_separatorHr "+m[n.borderType],style:r}),this.renderSubtitle(l,{htmlEntityMode:!0}))}});n.default=g,t.exports=n["default"]},279:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function t(t,n){var i=[],a=!0,l=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(t){l=!0,o=t}finally{try{!a&&s["return"]&&s["return"]()}finally{if(l)throw o}}return i}return function(n,i){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=i(20),s=a(r),u=i(21),h=a(u),d=i(6),c=a(d),p=i(19),f=a(p),m=i(118),g=a(m),y=i(23),v=a(y),C=i(17),b=i(37),S=i(27),I=a(S),_=i(280),x=a(_),E=i(39),N=i(55),T=i(7),O=i(282),M=a(O),L=i(8),P=i(60),w=a(P),B=i(283),A=a(B),D=(i(224),s.default.createClass({displayName:"CommodityTitle",mixins:[v.default],_stopPop:function(e){e.stopPropagation()},handleLinkBtnStateChange:function(t){this.props.onHover&&this.props.onHover(t.hover)},render:function(){var t=this.props,n=t.url,i=t.data,a=(t.isMobile,t.linkedApt),l=t.style,o=(0,L.autoMbrmLinkify)(n);return s.default.createElement("p",{className:"fbc_commodityTitle",style:a?null:l},o?s.default.createElement(b.BaseBtn,{component:"a",className:"fbc_commodityLink",onStateChange:this.handleLinkBtnStateChange,onMouseDown:this._stopPop,target:"_blank",href:o,rel:"noreferrer"},i.name):i.name)}})),R=s.default.createClass({displayName:"CommodityItem",mixins:[v.default],getInitialState:function(){this.operator=null,this.optNum=null,this.optImageContainer=null,this.optChoiceContainer=null,this.theme=(0,C.getThemeHelper)(),this.imageSize=null,this.getComponentSizeDetail=(0,L.memo)(this._getComponentSizeDetail);var t={linkActive:!1,optionNoInfo:null};return t=o({},t,this.getOptionNoInfo(t))},componentDidUpdate:function(t){this.props.hideNoQuota===t.hideNoQuota&&this.props.onRenderOptionNum===t.onRenderOptionNum&&this.props.updateCount===t.updateCount||this.setState(this.getOptionNoInfo(this.state))},getOptionNoInfo:function(t){var n=this.props,i=n.hideNoQuota,a=n.onRenderOptionNum,l=n.isLinked,o=n.linkLimit,r=t.optionNoInfo,s=this.getRemainingQuota();if(i&&s.accMaxCanUse<=0&&!l||l&&(0===o||s.accMaxCanUse<=0)){if(r)return this.optNum=null,{optionNoInfo:null}}else{var u=a();if(!r||u.join("-")!==r.join("-"))return this.optNum=u[0],{optionNoInfo:u}}return{optionNoInfo:r}},_getComponentSizeDetail:function(t,n,i,a,l){var r={width:a,height:l},s=null,u=o({},r);return n&&i&&(s={width:a,height:n<a?i:i/n*a},u.height+=s.height),u.width+=(0,C.getStaticData)("CP_COMMODITY_ITEM_PADDING_LR"),u.height+=(0,C.getStaticData)("CP_COMMODITY_ITEM_PADDING_TB")+2,{num:t,choiceSize:r,size:u,imageSize:s}},getComponentSize:function(){if(this.optNum&&this.operator){var t=h.default.findDOMNode(this.optChoiceContainer),n=t.style.minHeight;t.style.minHeight=null;var i=t.getBoundingClientRect();t.style.minHeight=n;var a=this.getComponentSizeDetail(this.optNum,this.imageSize?this.imageSize.width:null,this.imageSize?this.imageSize.height:null,i.width,i.height);return this.imageContainerSize={},a&&a.imageSize&&(this.imageContainerSize=a.imageSize),a}return null},getImageFieldSize:function(){var t=h.default.findDOMNode(this.optChoiceContainer),n=t.style.minHeight;t.style.minHeight=null;var i=t.getBoundingClientRect();t.style.minHeight=n,this.imageContainerSize={},this.imgSize&&this.imageSize.width&&this.imageSize.height&&(this.imageContainerSize={width:i.width,height:this.imageSize.width<i.width?this.imageSize.height:this.imageSize.height/this.imageSize.width*i.width})},handleImageLoad:function(t){var n=this.props.onImageLoad;this.imageSize=t,n&&n()},handleClick:function(){var t=this.props,n=t.data,i=t.onChange,a=t.value,l=this.getRemainingQuota();a<l.accMaxCanUse&&i&&i({id:n.sId,num:a+1}),this.operator.blur()},handleARIA_select:function(e){if(this.operator&&this.operator.isFocus()&&(13===e.keyCode||32===e.keyCode)){e.preventDefault();var t=this.props,n=t.data,i=t.onChange,a=t.value,l=this.getRemainingQuota();a<l.accMaxCanUse&&i&&i({id:n.sId,num:a+1})}},handleStopPop:function(e){e.stopPropagation()},handlePreviewImage:function(e){e.stopPropagation();var t=this.props,n=t.data,i=t.index,a=t.onPreview,o=(0,L.getAllOptionImageUrl)(n),r=l(o,2),s=r[0],u=r[1];s&&a&&a(i,this.optImageContainer,{image:s,imageFull:u})},handleQuantityChange:function(e,t){var n=this.props,i=n.data,a=n.onChange;a&&a({id:i.sId,num:t})},handleOperatorBlur:function(){this.operator.blur()},handleLinkBtnHover:function(t){this.setState({linkActive:t})},refOptImage:function(t){this.optImageContainer=t},refOptChoice:function(t){this.optChoiceContainer=t},refOperator:function(t){this.operator=t},renderDescribe:function(t){if(!t||c.default.isArray(t)&&""===t.join(""))return"";if(c.default.isArray(t)){var n=t.length;return c.default.map(t,function(t,i){return!t&&n>1?s.default.createElement("br",{key:"el"+i}):s.default.createElement("span",{key:"l"+i},t,i+1!==n?s.default.createElement("br",null):null)})}return""+t},getRemainingQuota:function(){var t=this.props,n=t.limitInfo,i=t.isLinked,a=t.linkQuota,l=1/0,o=1/0;if(n||i&&null!=a){var r=(0,L.quotaCalculate)(n,a);l=(0,L.maxCanUseCalculate)(r),o=r.remaining}return{remaining:o,maxCanUse:l,accMaxCanUse:Math.min(o,l)}},renderLimit:function(t){var n=t.remaining,i=t.maxCanUse,a=this.props,l=a.showLimit,o=a.tipsStyle,r=a.isLinked,u=a.displayLinkedQuota;if(isFinite(n)||isFinite(i)){var h=(0,C.getLang)(),d="";return(l||r&&u)&&n>0?isFinite(n)?d=isFinite(i)?h.cCommodityRemainMaxTips({max:i,remain:n}):h.cQuotaRemainingFunc({remaining:n}):isFinite(i)&&(d=h.cCommodityMaxTips({max:i})):n<=0&&(d=h.cQuotaRemainingFunc({remaining:0})),s.default.createElement("span",{className:"fbc_commodityTips",style:o},d)}return null},renderImageBlock:function(){var t=this.props,n=t.data,i=t.sizeList,a=t.layout,l=null;i&&(l=i[Math.ceil(this.optNum/a)-1]);var o=(0,L.getOptionImageUrl)(n,a);if(o){var r=!1;return this.imageSize&&(r=this.imageSize.width>1.2*this.imageContainerSize.width||this.imageSize.height>1.2*this.imageContainerSize.height),s.default.createElement("div",{className:"fbc_picOptionImage",ref:this.refOptImage,style:{minHeight:l?l.imageHeight:null}},s.default.createElement(I.default,{className:"fbc_picOptionImg",src:o,onLoad:this.handleImageLoad,cacheSize:!0}),r?s.default.createElement(b.BaseBtn,{className:"fbc_imgPreview iconfont",onMouseDown:this.handleStopPop,onTouchStart:this.handleStopPop,onClick:this.handlePreviewImage},String.fromCharCode(59010)):null)}return l&&l.imageHeight?s.default.createElement("div",{className:"fbc_picOptionImagePlaceholder",style:{minHeight:l?l.imageHeight:null}},s.default.createElement("div",{className:"fbc_picopContent"},c.default.filter([n.name,n.describe.join("")]).join("Â·"))):null},renderInputBlock:function(t){var n=this.props,i=n.data,a=n.value,l=n.isHidePrice,o=n.sizeList,r=n.layout,u=n.symbol,h=n.contentSize,d=n.isMobile,c=n.linkedApt,p=(t.disabled,t.remaining),m=t.maxCanUse,g=t.accMaxCanUse,y=null;o&&(y=o[Math.ceil(this.optNum/r)-1]);var v=i.isJumpTo&&i.jumpTo,C=null;if(v){var b=(0,L.linkify)(i.jumpTo);b&&(C=b)}return s.default.createElement("div",{className:"fbc_commodityInput",ref:this.refOptChoice,style:{minHeight:y?y.choiceHeight:null}},s.default.createElement("div",{className:"fbc_commodityContentWrapper"},s.default.createElement(D,{url:v?C:null,data:i,isMobile:d,linkedApt:c,style:this.theme.getComponentCommodityNameStyle(),onHover:this.handleLinkBtnHover}),i.describe?s.default.createElement("p",{className:"fbc_commodityDescribe",style:c?null:this.theme.getComponentCommodityDescribeStyle()},this.renderDescribe(i.describe)):null,this.renderLimit({remaining:p,maxCanUse:m})),s.default.createElement("div",{className:(0,f.default)("fbc_commodityPriceWrapper",{isHidePrice:l})},l?null:s.default.createElement(A.default,{component:"p",className:"fbc_commodityPrice",reset:!0,contentWidth:h},s.default.createElement(w.default,{symbol:u,price:i.price})),s.default.createElement(M.default,{className:"fbc_commodityQuantity",min:0,max:g,value:a,onBlur:this.handleOperatorBlur,onChange:this.handleQuantityChange})))},render:function(){var t=this.props,n=t.className,i=t.style,a=t.active,r=t.chooseMax,u=t.hideNoQuota,h=t.sizeList,d=t.layout,c=t.pictureLayout,p=t.inValid,m=t.linkedApt,g=t.isLinked,y=(t.linkQuota,t.linkLimit),v=this.state,C=v.linkActive,S=v.optionNoInfo,I=this.getRemainingQuota();if(u&&I.accMaxCanUse<=0&&!g)return null;if(g&&(0===y||I.accMaxCanUse<=0))return null;var _=I.accMaxCanUse<=0||!a&&r,x=void 0,E=void 0;if(S){var N=l(S,2);x=N[0],E=N[1]}var T=m?null:i;if(h){var O=h[Math.ceil(x/d)-1],M={minHeight:O?O.optHeight:null};M.minHeight&&(T=(0,L.styleInject)(T,M))}var P=c&&[2,4].indexOf(+c)>-1,w=this.renderInputBlock(o({no:E,disabled:_},I));return s.default.createElement(b.BaseBtn,{component:"li",className:(0,f.default)("fbc_picOptionsLi","fbc_commodity_li",n,{"disabled":_,"error":p,"link_active":C},"fbc_option_content_layout_"+c),style:T,disabled:_,onKeyDown:this.handleARIA_select,role:"gridcell",tabIndex:0,ref:this.refOperator},P?w:null,this.renderImageBlock(),P?null:w,s.default.createElement("div",{className:"clearB","aria-hidden":!0}))}}),k=s.default.createClass({displayName:"Commodity",mixins:[g.default,v.default],contextTypes:{updateEmbedContainer:s.default.PropTypes.func},getInitialState:function(){return this.theme=(0,C.getThemeHelper)(),this.store=(0,C.getStore)(),this.form=(0,C.getFormStructure)(),this.options=[],this.updateOptionSize=c.default.debounce(this._updateOptionSize,200),this.handleImageLoaded=c.default.debounce(this._handleUpdateOptionSize,400),this.handleResize=c.default.debounce(this._handleUpdateOptionSize,200),{updateCount:0,sizeList:null,contentSize:null,previewIdx:-1}},componentDidMount:function(){this.unbindEvent=(0,T.onResize)(this.handleResize),this.unbind=this.store.addChangeListener(this.handleStateChange),this.updateOptionSize()},componentDidUpdate:function(t){this.props.linkedApt&&(t.linkQuota===this.props.linkQuota&&t.linkLimit===this.props.linkLimit||this.updateOptionSize())},componentWillUnmount:function(){this.unbindEvent&&this.unbindEvent(),this.unbind&&this.unbind(),this.updateOptionSize=null,this.handleImageLoaded=null,this.options=[],this.unmount()},_updateOptionSize:function(){var t=this,n=this.getCommodityLayoutType(),i=null,a=null;n>1?(i=[],c.default.forEach(this.options,function(t){if(t){var l=t.getComponentSize();if(!l)return;!a&&l.choiceSize&&(a=l.choiceSize.width-100);var o=Math.ceil(l.num/n)-1,r=Math.ceil(l.imageSize?l.imageSize.height:0),s=Math.ceil(l.size.height),u=Math.ceil(l.choiceSize?l.choiceSize.height:0);null==i[o]?i[o]={imageHeight:r,optHeight:s,choiceHeight:u}:i[o]={imageHeight:Math.max(i[o].imageHeight,r),optHeight:Math.max(i[o].optHeight,s),choiceHeight:Math.max(i[o].choiceHeight,u)}}})):c.default.forEach(this.options,function(t){t&&t.getImageFieldSize()}),this.setState({sizeList:i,contentSize:a},function(){t.context.updateEmbedContainer&&t.context.updateEmbedContainer()})},_handleUpdateOptionSize:function(){var t=this;this.setState({updateCount:(this.state.updateCount+1)%10},function(){t.updateOptionSize()})},handleStateChange:function(t){t.type===E._PAGING_CHANGE_END&&this._handleUpdateOptionSize()},handlePreviewImage:function(t,n,i){var a=n.querySelector("img");this.previewer&&this.previewer.preview(a||n,i.image,i.imageFull),this.setState({previewIdx:t})},handlePreviewerUnmount:function(){this.setState({previewIdx:null})},handleChangeCommodity:function(t){var n=this.props.data;this.store.dispatch((0,E.SET_COMMODITY_VALUE)({id:n.id,data:t}))},handleRenderOptionNum:function(){var t=this.props.data,n=++this.optionNum;return t.isAutoNo?[n,(0,N.OPTION_NUM)(n,t.autoNo)]:[n,null]},hasValue:function(t){var n=this.props.fill,i=!1;return c.default.forEach(n||[],function(n){if(t===n)return i=!0,!1}),i},getCommodityLayoutType:function(){var t=this.props,n=t.data,i=t.inSqueeze,a=n.optionsLayout||3;return(this.isMobile()||i)&&(a=[3,4].indexOf(+n.picLayout)>-1?2:Math.min(2,a)),a},refPreview:function(t){this.previewer=t},refPicOption:function(t){this.options.push(t)},renderCommodities:function(){var t=this;this.optionNum=0;var n=this.props,i=n.data,a=n.fill,l=n.valid,r=n.linkedApt,u=n.linkQuota,h=n.linkLimit,d=n.displayLinkedQuota,p=this.state,m=p.previewIdx,g=p.sizeList,y=p.contentSize,v=p.updateCount,b=this.getCommodityLayoutType(),S=[],I=l&&l.length>0,_=this.optionBlockStyle=this.optionBlockStyle||{default:this.theme.getPicOptionStyle(this.theme.NORMAL),hover:this.theme.getPicOptionStyle(this.theme.HOVER),active:this.theme.getPicOptionStyle(this.theme.HOVER)},x=(0,C.getCartSymbol)(),E=x.symbol,N={isMobile:this.isMobile(),linkedQuota:u||null,inValid:I,symbol:E,pictureLayout:+(i.picLayout||1),showLimit:i.isShowOptionLimit,hideNoQuota:i.isHideFullOption,isHidePrice:i.isHidePrice,sizeList:g,contentSize:y,layout:b,onPreview:this.handlePreviewImage,onChange:this.handleChangeCommodity,onRenderOptionNum:this.handleRenderOptionNum,onImageLoad:this.handleImageLoaded,style:_,optStyle:this.theme.getPicOptionIconStyle(),updateCount:v},T=null;i.isLimitOptions&&i.optionsQuotaInfo&&(T=i.optionsQuotaInfo);var O=!(!r||!u);return c.default.forEach(i.commodities,function(n,i){var l=T&&T[n.sId]?T[n.sId]:null,c=null,p=null;O&&(c=u[n.sId]),r&&h&&(p=h[n.sId]),S.push(s.default.createElement(R,o({data:n,key:"cmd-"+n.sId,index:i,value:a?a[n.sId]||0:0,ref:t.refPicOption,className:(0,f.default)({"in-preview":m===i}),limitInfo:l,linkedApt:r,isLinked:O,linkQuota:c,linkLimit:p,displayLinkedQuota:d},N)))}),S},renderTips:function(t){return null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.linkedApt,l=this.getCommodityLayoutType();return s.default.createElement("div",{className:(0,f.default)("fb_component",n.type),id:n.id,style:i},s.default.createElement("div",{className:"fb_componentText"},this.renderTitle(a?null:this.theme.getComponentTitleStyle()),this.renderSubtitle(a?null:this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),s.default.createElement("div",{className:"fb_componentBody"},s.default.createElement("div",{className:(0,f.default)("fbc_content_commodity","fbc_options_layout","fbc_options_layout_"+l)},s.default.createElement("ul",{role:"grid",tabIndex:0,"aria-labelledby":this.ariaLabelTriggerOrder()},this.renderCommodities()),s.default.createElement("div",{className:"clearB"}))),s.default.createElement(x.default,{ref:this.refPreview,onUnmount:this.handlePreviewerUnmount}))}});n.default=k,t.exports=n["default"]},282:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(19),o=a(l),r=i(20),s=a(r),u=i(23),h=a(u),d=i(37),c=s.default.createClass({displayName:"BaseNumberPicker",mixins:[h.default],getDefaultProps:function(){return{value:0,min:0,max:1/0}},getInitialState:function(){return{focus:!1}},getValue:function(){var t=this.props.value;return null!=t&&!isNaN(t)&&isFinite(t)||(t=0),t},handleStopPop:function(e){e.stopPropagation()},handleInputFocus:function(e){e.stopPropagation(),this.setState({focus:!0})},handleInputChange:function(e){e.stopPropagation(),this.handleChangeValue(e,+e.target.value)},handleInputBlur:function(e){e.stopPropagation(),this.setState({focus:!1}),this.handleChangeValue(e,+e.target.value);var t=this.props.onBlur;t&&t()},handleChangeValue:function(e,t){var n=this.props,i=n.min,a=n.max,l=n.value,o=n.onChange;null==i&&(i=0),null==a&&(a=1/0),null!=t&&!isNaN(t)&&isFinite(t)||(t=l||0),t<=i?t=i:t>=a&&(t=a),o&&o(e,t)},handleDecrease:function(e){e.stopPropagation(),this.handleChangeValue(e,this.props.value-1);var t=this.props.onBlur;t&&t()},handleIncrease:function(e){e.stopPropagation(),this.handleChangeValue(e,this.props.value+1);var t=this.props.onBlur;t&&t()},handleKeyDecrease:function(e){var t=this.props,n=t.min,i=t.max,a=t.disabled,l=this.getValue();if(null==n&&(n=0),null==i&&(i=1/0),n===i&&0===n&&(a=!0),13===e.keyCode||32===e.keyCode){if(e.preventDefault(),e.stopPropagation(),l>=i||a)return;this.handleChangeValue(e,this.props.value-1)}},handleKeyIncrease:function(e){var t=this.props,n=t.min,i=t.max,a=t.disabled,l=this.getValue();if(null==n&&(n=0),null==i&&(i=1/0),n===i&&0===n&&(a=!0),13===e.keyCode||32===e.keyCode){if(e.preventDefault(),e.stopPropagation(),l>=i||a)return;this.handleChangeValue(e,this.props.value+1)}},render:function(){var t=this.props,n=t.className,i=t.btnStyle,a=t.inputStyle,l=t.style,r=this.props,u=r.min,h=r.max,c=r.disabled,p="bb-npicker-",f=this.getValue();return null==u&&(u=0),null==h&&(h=1/0),u===h&&0===u&&(c=!0),s.default.createElement(d.BaseBtn,{component:"span",className:(0,o.default)("bb-number-picker",n),prefix:p,style:l,disabled:c,role:"spinbutton",onMouseDown:this.handleStopPop,onTouchStart:this.handleStopPop,"aria-hidden":!0},s.default.createElement(d.BaseBtn,{className:"iconfont bb-np-btn bb-np-decrease",style:i,tabIndex:0,role:"button","aria-disabled":f<=u||c,"aria-label":" - ",disabled:f<=u||c,onMouseDown:this.handleStopPop,onKeyDown:this.handleKeyDecrease,onTouchStart:this.handleStopPop,onClick:this.handleDecrease},String.fromCharCode(58980)),s.default.createElement("div",{className:"bb-np-data-wrapper"},s.default.createElement("span",{className:"bb-np-data-hint",style:a},f),s.default.createElement("input",{className:"bb-np-data",style:a,value:""+f,tabIndex:0,role:"number",disabled:c,onClick:this.handleStopPop,onKeyDown:this.handleStopPop,onKeyUp:this.handleStopPop,onChange:this.handleInputChange,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur})),s.default.createElement(d.BaseBtn,{className:"iconfont bb-np-btn bb-np-increase",style:i,tabIndex:0,role:"button","aria-disabled":f>=h||c,"aria-label":" + ",disabled:f>=h||c,onMouseDown:this.handleStopPop,onKeyDown:this.handleKeyIncrease,onTouchStart:this.handleStopPop,onClick:this.handleIncrease},String.fromCharCode(58979)),s.default.createElement("span",{className:"bb-np-bg","aria-hidden":!0}))}});n.default=c,t.exports=n["default"]},283:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function l(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=i(6),s=(a(r),i(20)),u=a(s),h=i(21),d=a(h),c=i(23),p=a(c),f=i(8),m=u.default.createClass({displayName:"BaseFlexibleText",mixins:[p.default],getDefaultProps:function(){return{component:"div",minFontSize:12}},getInitialState:function(){return{fontSize:null}},componentDidMount:function(){this._calcFontSize()},componentDidUpdate:function(){this._calcFontSize()},_calcFontSize:function(){var t=this,n=this.props,i=n.contentWidth,a=n.minFontSize,l=n.measureText,o=n.reset;if(i){var r=d.default.findDOMNode(this.text),s=l||r.innerText;this.fontInfo||(this.fontInfo=(0,f.getFontInfo)(r));var u=function(n){return(0,f.getTextWidth)(s,n+"px/"+t.fontInfo.lineHeight+" "+t.fontInfo.font)},h=this.fontInfo.fontSize,c=null;for(c=u(h);c>i&&h>a;)h--,c=u(h);o&&h===a&&c>i&&(h=this.fontInfo.fontSize),this.setState({fontSize:h})}},refText:function(t){this.text=t},render:function(){var t=this.props,n=t.component,i=t.style,a=t.children,r=(t.contentWidth,t.minFontSize,t.measureText,t.reset,l(t,["component","style","children","contentWidth","minFontSize","measureText","reset"])),s=this.state.fontSize,h=i;return s&&(h=o({},h,{fontSize:s})),u.default.createElement(n,o({},r,{ref:this.refText,style:h}),a)}});n.default=m,t.exports=n["default"]},284:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(20),o=a(l),r=i(19),s=a(r),u=i(118),h=a(u),d=i(23),c=a(d),p=i(17),f=i(111),m=a(f),g=function(t){var n=(0,p.getCurrentLang)(),i="ar"===n,a=["cn","tw","ja","ko"].indexOf(n)===-1;return{1:i?"right":a?"left":"justify",2:"center",3:i?"left":"right"}[t]},y=o.default.createClass({displayName:"StaticContent",mixins:[h.default,c.default],getInitialState:function(){return this.theme=(0,p.getThemeHelper)(),{}},renderFoldText:function(){var t=this.props.data;return t.isFoldText?o.default.createElement("span",{className:(0,s.default)("fbc_describe fbc_foldTips"),id:"sub-"+t.id},this.renderRichContent(t.foldContent||"",t.foldContent_style||null,!0)):null},renderContent:function(){var t=this.props.data;return t.title&&0!==this.getRawContent(t.title).length?o.default.createElement("span",{className:(0,s.default)("fbc_describe"),id:"sub-"+t.id},this.renderRichContent(t.title||"",t.title_style||null,!0)):null},render:function(){var t=this.props,n=t.data,i=t.style,a=_.assign({textAlign:g(n.subTitleAlign||1)},this.theme.getComponentDescStyle());return o.default.createElement("div",{className:(0,s.default)("fb_component","fb_staticComponent",n.type),id:n.id,style:i},o.default.createElement(m.default,{style:a,expandBtnClassName:"fbc_foldBtn",expandedText:(0,p.getLang)().cFoldText,collapsedText:(0,p.getLang)().cUnFoldText,tips:n.isFoldText?this.renderFoldText():null,iconStyle:{default:this.theme.getTriggerIconStyle(this.theme.NORMAL),active:this.theme.getTriggerIconStyle(this.theme.ACTIVE)},content:this.renderContent()}))}});n.default=y,t.exports=n["default"]},285:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function l(t){return Array.isArray(t)?t:Array.from(t)}function o(t){if(Array.isArray(t)){for(var n=0,i=Array(t.length);n<t.length;n++)i[n]=t[n];return i}return Array.from(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.getAllImageMetaSize=void 0;var r=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=i(6),u=a(s),h=i(20),d=a(h),c=i(19),p=a(c),f=i(118),m=a(f),g=i(23),y=a(g),v=i(17),C=i(111),b=a(C),S=i(27),I=a(S),_=i(8),x=1,E=2,N={layout:1,emptyMinSize:10,gap:5},T=function(t,n,i){var a,l=i.gap,r=(a=Math.max).call.apply(a,[null].concat(o(u.default.map(t,function(t){return t?t.height:0})))),s=0,h=(t.length-1)*l,d=u.default.reduce(t,function(t,n){return n?t+Math.floor(n.width*(r/n.height)):(s++,t)},0),c=1;d+h>n&&(c=(n-h)/d);var p=function(t){return Math.floor(t*c)},f={width:0,height:0};if(n-d-h>0){var m=n-d-h;f.width=Math.floor(m/s),f.height=p(r)}return{images:u.default.map(t,function(t){return t?{width:p(t.width*(r/t.height)),height:p(r)}:f})}},O=function(t,n,i,a){var l=a.emptyMinSize,o=a.gap,r=t?t.height:l,s=t?t.width:0,h=0,d=(n.length-1)*o,c=u.default.reduce(n,function(t,n){return n?t+n.width:(h++,t)},0),p=0;h===n.length?(p=(i-o)/2,t||(r=.6*p,s=p)):p=c/(n.length-h);var f=null,m=u.default.map(n,function(t){return t?{width:Math.floor(p),height:Math.floor(t.height*p/t.width)}:null});h===n.length||(f=u.default.reduce(m,function(t,n){return n?t+n.height:t},0));var g=Math.floor(Math.max(f+d,r)),y={width:0,height:0};h>0&&g-d>f&&(y.height=Math.floor((g-d-f)/h),y.width=p),m=u.default.map(m,function(t){return t?t:y});for(var v={width:t?Math.floor(s*(g/r)):Math.max(0,Math.floor(i-o-p)),height:Math.floor(g)},C=function(){var t=(i-o)/(v.width+p);v={width:Math.floor(t*v.width),height:Math.floor(t*v.height)};var n=0;p=Math.floor(t*p),m=u.default.map(m,function(i){var a=Math.floor(t*i.height);return n+=a,{width:p,height:a}});var a=Math.floor(Math.max(n+d,v.height));if(a!==v.height){var l=a/v.height;v={width:Math.floor(l*v.width),height:Math.floor(l*v.height)}}};v.width+o+p>i;)C();return{single:v,group:m}},M=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,i=n.containerWidth,a=n.layout,o=n.emptyMinSize,r=n.gap,s=x;switch(a>1&&t.length>2&&(s=E),s){case x:return T(t,i,{emptyMinSize:o,gap:r});case E:var u=null,h=null;if(2===a){var d=l(t);u=d[0],h=d.slice(1)}else if(3===a){var c=t.length;h=t.slice(0,c-1),u=t[c-1]}return O(u,h,i,{emptyMinSize:o,gap:r})}};n.getAllImageMetaSize=M;var L=["","left","center","right"],P="images/form/picStatic_imgPlaceholder.png",w=d.default.createClass({displayName:"PictureBlock",mixins:[y.default],getInitialState:function(){return{error:!1}},handleOpenLink:function(e){e.preventDefault();var t=this.props,n=t.src,i=t.link,a=(0,_.autoMbrmLinkify)(i);n&&a&&window.open(a)},onError:function(){this.setState({error:!0})},render:function(){var t=this.props,n=t.src,i=t.size,a=t.style,l=t.link,o=this.state.error,r=(0,_.linkify)(l);return d.default.createElement("div",{className:(0,p.default)("fbc_pictureImage",{"fbc_pictureEmpty":!n,"fbc_pictureLink":n&&r}),style:a,onClick:this.handleOpenLink},n&&!o?d.default.createElement(I.default,{className:"fbc_piImg",key:"img",style:i,onError:this.onError,noLazy:i&&i.height>300,src:n}):d.default.createElement("div",{className:"fbc_piImgEmpty",key:"imgPlaceholder",style:i},o?d.default.createElement(I.default,{style:{objectFit:"scale-down",width:"100%",height:"100%"},src:P}):null))}}),B=d.default.createClass({displayName:"StaticPicture",mixins:[m.default,y.default],contextTypes:{updateEmbedContainer:d.default.PropTypes.func},getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),this.queue=new Promise(function(t){return t(!0)}),{displaySize:null}},componentDidMount:function(){this.getDisplaySize()},componentDidUpdate:function(){this.getDisplaySize()},getDisplaySize:function(){var t=this,n=this.props,i=n.data,a=n.layout,l=this.getContentWidth()+(0,v.getStaticData)(a.isSqueeze?"CP_GROUP_ITEM_PADDING_LR":"CP_PADDING_LR")-(i.picPaddingLRNone?0:(0,v.getStaticData)("CP_PADDING_PIC_LR"));this.contentSize!==l&&(this.contentSize=l,this.queue=this.queue.then(function(){return t.calcImageSize(l)}).then(function(n){var i=n;t.setState({displaySize:i},function(){t.context.updateEmbedContainer&&t.context.updateEmbedContainer()})}))},getImageUrl:function(t){var n=null;return t&&(t.isLink?n=t.linkUri:t.u&&t.e&&(n=t.imageUri)),n},calcImageSize:function(t){var n=this.props.data,i=null==n.picPadding?5:+n.picPadding;if(!this.imageSize){var a=[];if(n.pictures)for(var l=0,o=+(n.picNumber||1);l<o;l++){var r=n.pictures[l];r?r.width&&r.height?a.push({width:r.width,height:r.height}):a.push((0,_.getImageSize)(this.getImageUrl(r))):a.push(null)}this.imageSize=Promise.all(a)}return this.imageSize.then(function(a){return M(a,{containerWidth:t,layout:n.picLayout||1,emptyMinSize:20,gap:i})})},renderImages:function(){var t=this,n=this.props.data,i=this.state.displaySize,a=[];if(n.pictures)for(var l=0,o=+(n.picNumber||1);l<o;l++)a[l]=n.pictures[l];var s=null==n.picPadding?5:+n.picPadding,h=null==n.picPaddingTB?5:+n.picPaddingTB,c=null,f=[],m=null,g=n.picLayout;switch(a.length<=2&&g>1&&(g=1),g){case 2:c=a[0],f=a.slice(1);var y=s+(i?i.single.width+(i.group[0]||{}).width:0);m=d.default.createElement("div",{className:"fbc_pictureGroup_container clear",style:{width:y}},d.default.createElement("div",{className:"fbc_pictureGroup big",key:"pg-big"},d.default.createElement(w,{src:c?this.getImageUrl(c):null,link:c&&c.isJumpTo?c.jumpTo:null,style:{marginRight:s},size:i?i.single:null})),d.default.createElement("div",{className:"fbc_pictureGroup small",key:"pg-small"},u.default.map(f,function(n,a){return d.default.createElement(w,{src:n?t.getImageUrl(n):null,key:"pg-g-"+a,link:n&&n.isJumpTo?n.jumpTo:null,style:0===a?null:{marginTop:s},size:i?i.group[a]:null})})));break;case 3:var v=a.length;f=a.slice(0,v-1),c=a[v-1];var C=s+(i?i.single.width+(i.group[0]||{}).width:0);m=d.default.createElement("div",{className:"fbc_pictureGroup_container clear",style:{width:C}},d.default.createElement("div",{className:"fbc_pictureGroup small",key:"pg-small"},u.default.map(f,function(n,a){return d.default.createElement(w,{src:n?t.getImageUrl(n):null,key:"pg-g-"+a,link:n&&n.isJumpTo?n.jumpTo:null,style:0===a?null:{marginTop:s},size:i?i.group[a]:null})})),d.default.createElement("div",{className:"fbc_pictureGroup big",key:"pg-big"},d.default.createElement(w,{src:c?this.getImageUrl(c):null,link:c&&c.isJumpTo?c.jumpTo:null,style:{marginLeft:s},size:i?i.single:null})));break;case 1:default:m=[];for(var b=+(n.picNumber||1),S=s*(b-1),I={},_=0;_<b;_++){var x=n.pictures[_];if(i&&(S+=i.images[_].width),x)switch(x.picAlign){case 1:I.marginLeft=0;break;case 3:I.marginRight=0;break;case 2:}m.push(d.default.createElement(w,{key:"img"+_,src:x?this.getImageUrl(x):null,link:x&&x.isJumpTo?x.jumpTo:null,style:0===_?null:{marginLeft:s},size:i?i.images[_]:null}))}m=d.default.createElement("div",{className:"fbc_pictureGroup_container clear",style:r({width:S},I)},m)}return d.default.createElement("div",{className:(0,p.default)("fbc_pictureWrapper","images-"+(n.picNumber||1),"layout-"+(g||1)),style:{paddingTop:h,paddingBottom:n.isAddDescribe?0:h}},m)},renderFoldText:function(){var t=this.props.data;return t.isDescribeTextFold?d.default.createElement("span",{className:(0,p.default)("fbc_describe fbc_foldTips"),id:"sub-"+t.id},this.renderRichContent(t.describeFoldText||"",t.describeFoldText_style||null,!0)):null},renderContent:function(){var t=this.props.data;return t.picDescribe&&0!==this.getRawContent(t.picDescribe).length?d.default.createElement("span",{className:(0,p.default)("fbc_describe"),id:"sub-"+t.id},this.renderRichContent(t.picDescribe||"",t.picDescribe_style||null,!0)):null},render:function(){var t=this.props,n=t.data,i=t.style,a=L[n.picSubTitleAlign||1],l=u.default.assign({textAlign:a},this.theme.getComponentDescStyle());return d.default.createElement("div",{className:(0,p.default)("fb_component","fb_staticComponent",n.type,{"fb_staticPicPaddingNone":n.picPaddingLRNone,"fb_staticPicHasDescribe":n.isAddDescribe}),id:n.id,style:i},this.renderImages(),n.isAddDescribe?d.default.createElement(b.default,{style:l,className:(0,p.default)("fbc_foldContent",a?"fbc_fold_align_"+a:""),expandBtnClassName:"fbc_foldBtn",expandedText:(0,v.getLang)().cFoldText,collapsedText:(0,v.getLang)().cUnFoldText,tips:n.isDescribeTextFold?this.renderFoldText():null,iconStyle:{default:this.theme.getTriggerIconStyle(this.theme.NORMAL),active:this.theme.getTriggerIconStyle(this.theme.ACTIVE)},content:this.renderContent()
}):null)}});n.default=B},286:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(20),o=a(l),r=i(232),s=a(r),u=i(193),h=a(u),d=i(224),c=a(d),p=i(23),f=a(p),m=o.default.createClass({displayName:"ChangeableDataComponent",mixins:[f.default],render:function(){var t=this.props.data;switch(+t.searchComponentType){case 2:return o.default.createElement(c.default,this.props);case 3:return o.default.createElement(s.default,this.props);case 1:default:return o.default.createElement(h.default,this.props)}}});n.default=m,t.exports=n["default"]},287:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(20),o=a(l),r=i(19),s=a(r),u=i(118),h=a(u),d=i(23),c=a(d),p=i(17),f=i(39),m=i(288),g=a(m),y=i(57),v=g.default.InputSearch,C=1,b=2,S=o.default.createClass({displayName:"City",mixins:[h.default,c.default],getInitialState:function(){return this.theme=(0,p.getThemeHelper)(),this.store=(0,p.getStore)(),{}},handleChange:function(e,t){var n=this.props.data;this.store.dispatch((0,f.SET_LOCATION_VALUE)({id:n.id,data:t}))},handleBlur:function(e,t){var n=this.props,i=n.fill,a=n.data;i&&i.searchText&&!i.select&&t&&t.length>0&&this.store.dispatch((0,f.SET_LOCATION_VALUE)({id:a.id,data:{select:[t[0]]}}))},getSearchValue:function(){var t=this.props.fill;if(t){if(t.select)return t.select.value;if(t.searchText)return t.searchText}return null},renderTips:function(t){return null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,l=t.valid,r=t.layout,u=this.getComponentLayoutStyleInfo(),h=l&&l.length>0,d=(0,p.getDeviceInfo)(),c=y.FIELD_INFO_MAPPING[n.type]||null,f=n.componentType||C;return o.default.createElement("div",{className:(0,s.default)("fb_component",n.type),id:n.id,style:i},o.default.createElement("div",{className:"fb_componentText",style:u?u.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),o.default.createElement("div",{className:"fb_componentBody",style:u?u.bodyStyle:null},o.default.createElement("div",{className:(0,s.default)("fbc_content_withoutGap",{fbc_widthCp:f===b}),style:{width:f===b?(this.isMobile()||r.isSqueeze?100:10*(n.cpWidth||8))+"%":null,marginTop:u?-(0,p.getStaticData)("CP_ITEM_GAP"):null}},f===C?o.default.createElement(g.default,{nodeList:a?a.struct:null,inValid:h,isMobile:this.isMobile(),geoLevel:+(n.minLevel||3),deviceInfo:d,isFixedCountry:n.isLimitCountry||!1,fixedCountry:n.limitCountry||null,onChange:this.handleChange}):o.default.createElement(v,{value:this.getSearchValue(),inValid:h,isMobile:this.isMobile(),geoLevel:+(n.minLevel||3),deviceInfo:d,icon:c?c.icon:null,iconStyle:{default:this.theme.getInputBoxIconStyle(this.theme.NORMAL),active:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),error:this.theme.getInputBoxIconStyle(this.theme.ERROR)},isFixedCountry:n.isLimitCountry||!1,fixedCountry:n.limitCountry||null,onChange:this.handleChange,onBlur:this.handleBlur})),o.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":"."})))}});n.default=S,t.exports=n["default"]},288:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function l(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}function o(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}Object.defineProperty(n,"__esModule",{value:!0});var r=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=i(6),u=a(s),h=i(20),d=a(h),c=i(19),p=a(c),f=i(226),m=a(f),g=i(23),y=a(g),v=i(17),C=i(37),b=i(212),S=i(8),I=i(289),_=a(I),x=i(290),E=a(x),N=i(100),T=a(N),O=d.default.createClass({displayName:"LocationOption",mixins:[y.default],handleMouseEnter:function(){var t=this.props,n=t.id,i=t.onChangeCurrent;i&&i(n)},handleClick:function(e){var t=this.props,n=t.id,i=t.onChange;i&&i(e,n)},render:function(){var t=this.props,n=t.isCountry,i=t.value,a=t.id,l=(t.size,t.alias),o=t.current,r=t.selected,s=t.role,u=t.ariaCurrentId;return d.default.createElement(C.BaseBtn,{component:"li",className:(0,p.default)("fbc_selectLi",{"fbc_select_current":o,"fbc_select_selected":r,"current":o,"select":r}),role:s,"aria-current":o,id:o?u:null,onClick:this.handleClick,onMouseEnter:this.handleMouseEnter},n?d.default.createElement(_.default,{id:a,name:i}):i,l?d.default.createElement("div",{className:"fbc-option-alias"},l||""):null)}}),M=d.default.createClass({displayName:"LevelDropDown",mixins:[y.default],getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),{}},handleSelectOption:function(e,t){var n=this.props,i=n.onChange,a=n.level;i&&i(e,a,t)},handleResetOption:function(e){var t=this.props,n=t.onChange,i=t.level;n&&n(e,i,null)},renderContent:function(t){var n=this.props,i=n.loading,a=n.isCountry,l=t.id,o=t.text,r=t.placeholder,s=t.iconStyle;return[a?d.default.createElement("span",{key:"content",className:"fbc_selectRes"},l&&l.length>0?d.default.createElement(_.default,{id:l[0],name:o}):r):d.default.createElement("span",{key:"content-text",className:"fbc_selectRes"},o||r),i?d.default.createElement("span",{key:"loading",className:"fbc_selectArrow",style:s},d.default.createElement("span",{className:"fbc_select-drop-loading"})):d.default.createElement("span",{key:"arrow",className:"iconfont fbc_selectArrow",style:s},String.fromCharCode(58983))]},renderOption:function(t){var n=this.props,i=(n.fill,n.isCountry);return d.default.createElement(O,r({key:"l-opt-"+t.id,isCountry:i},t))},render:function(){var t=this.props,n=t.fill,i=t.inValid,a=t.options,l=t.style,o=t.deviceInfo,r={default:n?this.theme.getInputBoxStyle(this.theme.NORMAL):this.theme.getInputBoxStyle(this.theme.PLACEHOLDER),active:n?this.theme.getInputBoxStyle(this.theme.ACTIVE):this.theme.getInputBoxStyle(this.theme.PLACEHOLDER)};return l&&(r=(0,S.styleInject)(r,l)),d.default.createElement(m.default,{className:(0,p.default)("fbc_select","fbc_multiItem",{hasValue:n,error:i}),optionsClassName:(0,p.default)("fbc_options"),deviceInfo:o,placeholder:(0,v.getLang)().cSelectorPlaceholder,value:n,options:a,reset:!0,style:r,triggerStyle:this.theme.getInputBoxTriggerStyle(),iconStyle:{default:this.theme.getDropDownTriggerIconStyle(this.theme.NORMAL),active:this.theme.getDropDownTriggerIconStyle(this.theme.ACTIVE)},resetIconStyle:{default:this.theme.getDropDownResetIconStyle(this.theme.NORMAL),hover:this.theme.getDropDownResetIconStyle(this.theme.HOVER),active:this.theme.getDropDownResetIconStyle(this.theme.ACTIVE)},optionStyle:this.theme.getDropDownOptionMenuStyle(),onRenderContent:this.renderContent,onRenderOption:this.renderOption,onReset:this.handleResetOption,onChange:this.handleSelectOption})}}),L=d.default.createClass({displayName:"LocationPicker",mixins:[y.default],getDefaultProps:function(){return{nodeList:null,geoLevel:3,isFixedCountry:!0,fixedCountry:null}},getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),this.queue=Promise.resolve(!0),{lvl_0:null,lvl_1:null,lvl_2:null,lvl_3:null,lvl_4:null}},componentDidMount:function(){this.mounted=!0,this.checkNodeData()},componentWillUpdate:function(t){var n=this.props.nodeList;n!==t.nodeList&&this.checkNodeData(t)},componentWillUnmount:function(){this.mounted=!1},getNodeList:function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,i=n.nodeList,a=n.isFixedCountry,l=n.fixedCountry,t=i||[];return a&&(t[0]=l),t},checkNodeData:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,i=n.geoLevel,a=n.isFixedCountry,l={},s=this.getNodeList(n);a?l.lvl_0=null:this.queue=this.queue.then(function(){return(0,b.getLocation)(null,i).then(function(n){t.mounted&&t.setState({lvl_0:n})})});for(var u=1,h=function(n){var a=s[n-1],r="lvl_"+u;!a||t.state[r]&&a===t.state[r].pid?a||(l[r]=null):(l[r]=!0,t.queue=t.queue.then(function(){return(0,b.getLocation)(a,i).then(function(n){t.setState(o({},r,n))})})),u++},d=1;d<i+1;d++)h(d);this.setState(r({},l))},handleChangeLocation:function(e,t,n){var i=this.props.onChange;i&&i(e,{lvl:t,id:n})},renderLocationSelect:function(t){var n=this.state,i=this.props,a=i.isMobile,l=i.inValid,o=i.deviceInfo,r=this.getNodeList(this.props),s=n["lvl_"+t],h=n["lvl_"+(t+1)],c=h===!0;return s&&u.default.isPlainObject(s)&&s.data?d.default.createElement(M,{options:s.data,deviceInfo:o,key:"ldp_"+t,isCountry:0===t,loading:c,level:t,style:a?null:{width:s.maxWidth+(0===t?0:50)},fill:(r?r[t]:null)||null,inValid:l,onChange:this.handleChangeLocation}):null},renderFixedCountry:function(){var t=this.props,n=t.isFixedCountry,i=t.fixedCountry,a=t.isMobile,l=(0,b.getLocationInfo)(i);if(!n||!l)return null;var o=(0,S.styleInject)(this.theme.getInputBoxStyle(this.theme.NORMAL),a?null:{width:l.size+50});return d.default.createElement("div",{className:"fbc_multiItem fbc_select hasValue fbc_staticLocation country",style:o,key:"fixed_country"},d.default.createElement(_.default,{id:l.id,name:l.value,style:this.theme.getInputBoxExtraStyle()}))},render:function(){var t=this.props,n=(t.nodeList,t.geoLevel),i=t.isFixedCountry,a=(t.fixedCountry,[]),l=0;for(i&&(l=1,a.push(this.renderFixedCountry()));l<n+1;l++)a.push(this.renderLocationSelect(l));return d.default.createElement("div",{className:"fbc_locationPicker clear"},a)}}),P=/^[\w\s]$/,w="~Â·`!ï¼@#$ï¿¥%^â¦&*()ï¼ï¼â-_=+[]{}ããã|\\;:ï¼ï¼'\"ââ,./<>ãã?ï¼ï¼ã",B=d.default.createClass({displayName:"LocationInputSearch",mixins:[y.default],getDefaultProps:function(){return{value:null,selectedValue:null,geoLevel:3,isFixedCountry:!0,fixedCountry:null}},getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),this.queue=Promise.resolve(!0),this.getSearchLocation=(0,S.asyncDebounce)(b.getLocationByTyping||u.default.noop,300),{searchText:null,options:[],searching:!1}},componentDidMount:function(){this.checkOptions(this.props.value||null)},componentDidUpdate:function(){},checkOptions:function(t){var n=this;if(t!==this.state.searchText){if(!t)return void this.setState({searchText:null,options:[]});var i=this.props,a=i.isFixedCountry,l=i.fixedCountry,o=i.geoLevel;if(1===t.length&&(w.indexOf(t)>-1||P.test(t)))return;this.setState({searching:!0},function(){n.getSearchLocation(t,a?l:null,o).then(function(i){n.setState({searchText:t,options:i,searching:!1})}).catch(function(e){n.setState({searching:!1})})})}},handleChange:function(e,t,n){var i=this.props.onChange;i&&i(e,{select:n})},handleSearch:function(e){var t=this.props.onChange,n=e.target.value;this.checkOptions(n),t&&t(e,{select:null,searchText:n})},handleBlur:function(e){var t=this.props.onBlur,n=this.state.options;t&&t(e,n)},handleResetOption:function(e){var t=this.props.onChange;this.setState({options:[],searchText:null},function(){t&&t(e,{select:null,searchText:null})})},renderOption:function(t){return d.default.createElement(O,r({key:"l-opt-"+t.id},t))},renderFixedCountry:function(){var t=this.props,n=t.isFixedCountry,i=t.fixedCountry,a=t.isMobile,l=(0,b.getLocationInfo)(i);if(!n)return null;var o=(0,S.styleInject)(this.theme.getInputBoxStyle(this.theme.NORMAL),a?null:{width:l.size+50});return d.default.createElement("div",{className:"fbc_multiItem fbc_select hasValue fbc_staticLocation country",style:o},d.default.createElement(_.default,{id:l.id,name:l.value,style:this.theme.getInputBoxExtraStyle()}))},render:function(){var t=this.props,n=t.isFixedCountry,i=t.fixedCountry,a=t.value,l=t.inValid,o=t.deviceInfo,s=t.icon,u=t.iconStyle,h=t.isMobile,c=this.state,f=c.options,m=c.searching,g=(0,v.getLang)(),y={default:this.theme.getInputBoxStyle(this.theme.NORMAL),active:this.theme.getInputBoxStyle(this.theme.ACTIVE)};if(n&&i&&!h){var C=(0,b.getLocationInfo)(i);y=(0,S.styleInject)(y,{width:"calc(100% - "+(C.size+50+1*(0,v.getStaticData)("CP_ITEM_GAP"))+"px)"})}else n&&i&&!h||(y=(0,S.styleInject)(y,{width:"100%"}));var I=null;return n&&i||(I={icon:s,iconStyle:u}),d.default.createElement("div",{className:"fbc_locationPicker clear"},n?this.renderFixedCountry():null,d.default.createElement(E.default,r({className:(0,p.default)("fbc_multiItem",{hasValue:a,error:l}),optionsClassName:(0,p.default)("fbc_options"),inValid:l,deviceInfo:o,placeholder:g.cAddressPlaceholder,loading:g.cLocationLoading,waiting:a&&(""+a).length>0?g.cLocationWaiting:g.cAddressPlaceholder,noResult:g.cLocationSearchNoResult,searching:m,value:a,options:f,reset:!0,style:y},I,{triggerStyle:this.theme.getInputBoxStyle(this.theme.NORMAL,!1),inputStyle:this.theme.getInputBoxExtraStyle(),resetIconStyle:{default:this.theme.getDropDownResetIconStyle(this.theme.NORMAL),hover:this.theme.getDropDownResetIconStyle(this.theme.HOVER),active:this.theme.getDropDownResetIconStyle(this.theme.ACTIVE)},optionStyle:this.theme.getDropDownOptionStyle(),onRenderOption:this.renderOption,onReset:this.handleResetOption,onSearch:this.handleSearch,onChange:this.handleChange,onBlur:this.handleBlur})))}}),A=d.default.createClass({displayName:"LocationInput",mixins:[y.default],getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),{}},handleChange:function(e){var t=this.props.onChange;t&&t(e,{content:e.target.value})},renderFixedCountry:function(){var t=this.props,n=t.isFixedCountry,i=t.fixedCountry,a=t.isMobile,l=(0,b.getLocationInfo)(i);if(!n)return null;var o=(0,S.styleInject)(this.theme.getInputBoxStyle(this.theme.NORMAL),a?null:{width:l.size+50});return d.default.createElement("div",{className:"fbc_multiItem fbc_select hasValue fbc_staticLocation country",style:o},d.default.createElement(_.default,{id:l.id,name:l.value,style:this.theme.getInputBoxExtraStyle()}))},render:function(){var t=this.props,n=t.isFixedCountry,i=t.fixedCountry,a=t.inValid,o=(t.onChange,t.icon),s=t.iconStyle,u=t.isMobile,h=l(t,["isFixedCountry","fixedCountry","inValid","onChange","icon","iconStyle","isMobile"]),c=this.theme.getInputBoxStyle(this.theme.NORMAL);if(n&&i&&!u){var f=(0,b.getLocationInfo)(i);c=(0,S.styleInject)(c,{width:u?null:"calc(100% - "+(f.size+50+1*(0,v.getStaticData)("CP_ITEM_GAP"))+"px)"})}else n&&i&&!u||(c=(0,S.styleInject)(c,{width:"100%"}));var m=null;return n&&i||(m={icon:o,iconStyle:s}),d.default.createElement("div",{className:"fbc_locationPicker clear"},n?this.renderFixedCountry():null,d.default.createElement(T.default,r({className:(0,p.default)("fbc_multiItem fbc_input",{error:a}),style:c,inputStyle:this.theme.getInputBoxExtraStyle(),placeholder:(0,v.getLang)().cAddressPlaceholder,onChange:this.handleChange},m,{isMobile:u,inValid:a},h)))}});L.InputSearch=B,L.Input=A,n.default=L,t.exports=n["default"]},289:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(20),o=a(l),r=i(19),s=a(r),u=i(23),h=a(u),d=i(8),c=i(27),p=(a(c),{1:"ð¨ð³",3250:"ð¦ð«",3251:"ð¦ð±",3252:"ð©ð¿",3253:"ð¦ð©",3254:"ð¦ð´",3255:"ð¦ð¬",3256:"ð¦ð·",3257:"ð¦ð²",3258:"ð¦ðº",3259:"ð¦ð¹",3260:"ð¦ð¿",3261:"ð§ð¸",3262:"ð§ð­",3263:"ð§ð©",3264:"ð§ð§",3265:"ð§ð¾",3266:"ð§ðª",3267:"ð§ð¿",3268:"ð§ð¯",3269:"ð§ð¹",3270:"ð§ð´",3272:"ð§ð¼",3273:"ð§ð·",3274:"ð§ð³",3275:"ð§ð¬",3276:"ð§ð«",3277:"ð§ð®",3278:"ð°ð­",3279:"ð¨ð²",3280:"ð¨ð¦",3281:"ð¨ð»",3282:"ð¨ð«",3283:"ð¹ð©",3284:"ð¨ð±",3285:"ð¨ð´",3286:"ð°ð²",3287:"ð¨ð¬",3288:"ð¨ð©",3289:"ð¨ð°",3290:"ð¨ð·",3291:"ð¨ð®",3292:"ð­ð·",3293:"ð¨ðº",3294:"ð¨ð¾",3295:"ð¨ð¿",3296:"ð©ð°",3297:"ð©ð¯",3298:"ð©ð²",3299:"ð©ð´",3300:"ðªð¨",3301:"ðªð¬",3302:"ð¸ð»",3303:"ð¬ð¶",3304:"ðªð·",3305:"ðªðª",3306:"ðªð¹",3307:"ð«ð¯",3308:"ð«ð®",3309:"ð«ð·",3310:"ð¬ð¦",3311:"ð¬ð²",3312:"ð¬ðª",3313:"ð©ðª",3314:"ð¬ð­",3315:"ð¬ð·",3316:"ð¬ð©",3317:"ð¬ð¹",3318:"ð¬ð³",3319:"ð¬ð¼",3320:"ð¬ð¾",3321:"ð­ð¹",3322:"ð­ð³",3323:"ð­ðº",3324:"ð®ð¸",3325:"ð®ð³",3326:"ð®ð©",3327:"ð®ð·",3328:"ð®ð¶",3329:"ð®ðª",3330:"ð®ð±",3331:"ð®ð¹",3332:"ð¯ð²",3333:"ð¯ðµ",3334:"ð¯ð´",3335:"ð°ð¿",3336:"ð°ðª",3337:"ð°ð®",3338:"ð°ð·",3339:"ð½ð°",3340:"ð°ð¼",3341:"ð°ð¬",3342:"ð±ð¦",3343:"ð±ð»",3344:"ð±ð§",3345:"ð±ð¸",3346:"ð±ð·",3347:"ð±ð¾",3348:"ð±ð®",3349:"ð±ð¹",3350:"ð±ðº",3351:"ð²ð°",3352:"ð²ð¬",3353:"ð²ð¼",3354:"ð²ð¾",3355:"ð²ð»",3356:"ð²ð±",3357:"ð²ð¹",3358:"ð²ð­",3359:"ð²ð·",3360:"ð²ðº",3361:"ð²ð½",3362:"ð«ð²",3363:"ð²ð©",3364:"ð²ð¨",3365:"ð²ð³",3366:"ð²ðª",3367:"ð²ð¦",3368:"ð²ð¿",3369:"ð²ð²",3371:"ð³ð¦",3372:"ð³ð·",3373:"ð³ðµ",3374:"ð³ð±",3375:"ð³ð¿",3376:"ð³ð®",3377:"ð³ðª",3378:"ð³ð¬",3379:"ð³ðº",3381:"ð³ð´",3382:"ð´ð²",3383:"ðµð°",3384:"ðµð¼",3386:"ðµð¦",3387:"ðµð¬",3388:"ðµð¾",3389:"ð°ðµ",3390:"ðµðª",3391:"ðµð­",3392:"ðµð±",3393:"ðµð¹",3395:"ð¶ð¦",3396:"ð·ð´",3397:"ð·ðº",3398:"ð·ð¼",3402:"ð¼ð¸",3403:"ð¸ð²",3405:"ð¸ð¦",3406:"ð¸ð³",3407:"ð·ð¸",3408:"ð¸ð¨",3409:"ð¸ð±",3410:"ð¸ð¬",3411:"ð¸ð°",3412:"ð¸ð®",3413:"ð¸ð§",3414:"ð¸ð´",3416:"ð¿ð¦",3418:"ð¸ð¸",3419:"ðªð¸",3420:"ð±ð°",3421:"ð¸ð©",3422:"ð¸ð·",3423:"ð¸ð¿",3424:"ð¸ðª",3425:"ð¨ð­",3426:"ð¸ð¾",3427:"ð¹ð¯",3428:"ð¹ð¿",3429:"ð¹ð­",3430:"ð¹ð±",3431:"ð¹ð¬",3432:"ð¹ð´",3434:"ð¹ð³",3435:"ð¹ð·",3436:"ð¹ð²",3437:"ð¹ð»",3438:"ðºð¬",3439:"ðºð¦",3440:"ð¦ðª",3441:"ð¬ð§",3442:"ðºð¸",3443:"ðºð¾",3444:"ðºð¿",3445:"ð»ðº",3447:"ð»ðª",3448:"ð»ð³",3449:"ðªð­",3450:"ð¾ðª",3451:"ð¿ð²",3452:"ð¿ð¼",3453:"ð¦ð¸",3454:"ð¦ð®",3455:"ð¦ð¼",3456:"ð§ð²",3457:"ð®ð´",3458:"ð°ð¾",3459:"ð¨ð½",3460:"ð¨ð¨",3461:"ð¨ð¼",3462:"ð«ð°",3463:"ð«ð´",3464:"ðµð«",3465:"ð¬ð®",3466:"ð¬ð±",3467:"ð¬ðº",3468:"ð¬ð¬",3469:"ð¯ðª",3470:"ð®ð²",3471:"ð¾ð¹",3472:"ð²ð¸",3473:"ð³ð¨",3474:"ð³ð«",3475:"ð²ðµ",3476:"ðµð³",3477:"ðµð·",3478:"ð·ðª",3481:"ð¸ð½",3484:"ð¹ð°",3485:"ð¹ð¦",3487:"ð»ð¬"}),f=o.default.createClass({displayName:"Country",mixins:[h.default],render:function(){var t=this.props,n=t.id,i=t.name,a=t.className,l=t.style,r=d.deviceInfo.os,u=null;return u=r.tablet||r.phone?p[n]:o.default.createElement("span",{className:"flg flg-"+n}),o.default.createElement("span",{className:(0,s.default)("base-country",a),style:l},o.default.createElement("span",{className:"base-country-flag"},u),o.default.createElement("span",{className:"base-country-name"},i))}});n.default=f,t.exports=n["default"]},290:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function l(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function o(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function s(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function u(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0}),n.InputClickTrigger=void 0;var h=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},d=function(){function t(t,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,i,a){return i&&t(n.prototype,i),a&&t(n,a),n}}(),c=i(6),p=a(c),f=i(19),m=a(f),g=i(20),y=a(g),v=i(21),C=(a(v),i(227)),b=(a(C),i(23)),S=a(b),I=i(37),_=i(100),x=a(_),E=i(226),N=n.InputClickTrigger=function(t){function n(){var t,i,a,l;r(this,n);for(var o=arguments.length,u=Array(o),h=0;h<o;h++)u[h]=arguments[h];return i=a=s(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(u))),a.handleMouseDown=function(e){e.stopPropagation()},a.handleClick=function(e){var t=a.props,n=t.onClick,i=(t.close,t.open),l=(t.contentVisible,t.disabled),o=t.value;l||(o&&i(),a.focused=!0,setTimeout(function(){a.triggerField&&a.triggerField.focus()},150),n&&n(e))},a.handleFocus=function(e){var t=a.props,n=t.focus,i=t.onFocus,l=t.open,o=t.contentVisible,r=t.disabled,s=t.value;n&&(o||r||a.focused||!s||(l(),i&&i(e)))},a.handleBlur=function(e){var t=a.props,n=t.focus,i=t.onBlur;n&&(a.focused=!1,e.preventDefault(),i&&i(e))},a.refTriggerContainer=function(t){a.props.onTriggerRefChange&&a.props.onTriggerRefChange(t)},a.refTrigger=function(t){t?a.triggerField=t.getInputRef():a.triggerField=null},l=i,s(a,l)}return u(n,t),d(n,[{key:"render",value:function(){var t=this.props,n=t.prefix,i=t.className,a=t.placeholder,l=t.deviceInfo,o=t.inValid,r=t.children,s=t.onKeyDown,u=t.onChange,h=t.style,d=t.inputStyle,c=t.disabled,p=t.value;return y.default.createElement("div",{className:(0,m.default)("mg-inputTrigger",i),ref:this.refTriggerContainer,onMouseDown:this.handleMouseDown},y.default.createElement(x.default,{prefix:n,className:(0,m.default)("fbc_input",{"error":o}),ref:this.refTrigger,style:h,inputStyle:d,disabled:c,placeholder:a,value:p,deviceInfo:l,onChange:u,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,onKeyDown:s}),r)}}]),n}(C.ClickTrigger),T={KEY_ENTER:13,KEY_SPACE:32,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40},O=y.default.createClass({displayName:"InputSearch",mixins:[S.default],getDefaultProps:function(){return{prefix:"mg",disabled:!1,open:!1,placeholder:"Please select",loading:"Searching...",noResult:"No match options.",waiting:"Type on, please...",defaultValue:null,value:null,options:[],focus:!0,autoWidth:!0,cushion:-1,onRenderOption:null,reset:!1,onReset:p.default.noop,onSearch:p.default.noop,onChange:p.default.noop,onClick:p.default.noop}},getInitialState:function(){var t=[],n=this.props;n.value?t=t.concat(n.value):n.defaultValue&&(t=t.concat(n.defaultValue)),t=this.filterSelected(n,t),this.displayBottom=!0;var i="";return p.default.find(n.options,{id:t[0]})||(n.value||n.defaultValue)&&(i=[].concat(n.value||n.defaultValue)[0]),{selected:t,searchText:i,open:n.open}},componentWillReceiveProps:function(t){var n=p.default.find(t.options,{value:t.value});if(n&&(void 0!==t.value||void 0!==this.props.value)&&t.value!==this.props.value&&n){var i=this.filterSelected(t,n.id);this.setState({selected:i})}},filterSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments[1];n=[].concat(n);var i=p.default.filter(p.default.uniq(n),function(t){return null!==t&&void 0!==t}).sort();return!t.multiple&&i.length>1&&(i=[i[0]]),i},open:function(){this.setState({open:!0})},close:function(){this.setState({open:!1})},handlePopoverVisibleChange:function(t){t?this.props.onClick(t):this.setState({optionsReady:!1}),this.setState({open:t})},handleOptionReady:function(){this.setState({optionsReady:!0})},handleKeyDown:function(e){var t=this.state.open,n=e.keyCode;switch(n){case T.KEY_ESC:this.close();break;case T.KEY_DOWN:e.preventDefault(),this.options.hoverNext(e);break;case T.KEY_UP:e.preventDefault(),this.options.hoverPrev(e);break;case T.KEY_ENTER:if(!t&&value){this.open();break}e.preventDefault(),this.options.select(e)}},handlePrevent:function(e){e.stopPropagation(),e.preventDefault()},handleReset:function(e){e.stopPropagation(),e.preventDefault();var t=this.props.onReset;t(e,null),this.setState({selected:null})},handleOptionChange:function(e,t){var n=this.state.selected,i=this.props,a=i.multiple,l=i.options,o=i.onChange;if(a){var r=(n||[]).indexOf(t);n=(n||[]).slice(),r>-1?n.splice(r,1):n.push(t)}else n=[t],this.close();o(e,t,p.default.map(n,function(t){return p.default.find(l,{id:t})})),this.setState({selected:n})},handlePositionUpdated:function(t){"position-bottom-left"===t.position.name&&(this.displayBottom=!0),"position-top-left"===t.position.name&&(this.displayBottom=!1)},handleChangeSearchValue:function(e){var t=this.props.onSearch;e.target.value&&!this.state.open?this.open():""===e.target.value&&this.state.open&&this.close(),t&&t(e)},refPopover:function(t){this.popover=t},refOptions:function(t){this.options=t},getStyle:function(t){var n=this.state.open,i=this.props.disabled;if(t&&t.default){var a=t.default;return i&&t.disabled?a=p.default.assign({},a,t.disabled):(t.focus||t.active)&&n&&(a=p.default.assign({},a,t.active,t.focus)),a}return t},getTrueOptionStyle:function(t){var n=p.default.assign({},t),i=n.borderTopColor||n.borderColor,a=n.borderBottomColor||n.borderColor;return this.displayBottom?(n.borderTopColor=i,n.borderBottomColor=a):(n.borderTopColor=a,n.borderBottomColor=i),n},getText:function(){var t=this.props.options,n=this.filterSelected(this.props,this.state.selected),i=[];return p.default.forEach(n,function(n){var a=p.default.find(t,{id:n});a&&i.push(a.value)}),p.default.trim(i.join("; "))},render:function(){var t,n=this.props,i=n.prefix,a=n.placeholder,r=n.className,s=n.disabled,u=n.value,d=(n.onSearch,n.onClick),c=n.focus,p=n.onFocus,f=n.onBlur,g=n.cushion,v=n.reset,b=n.inValid,S=n.style,_=n.triggerStyle,x=n.inputStyle,T=n.resetIconStyle,O=n.optionStyle,M=n.deviceInfo,L=(n.onRenderContent,n.icon),P=n.iconStyle,w=n.searching,B=o(n,["prefix","placeholder","className","disabled","value","onSearch","onClick","focus","onFocus","onBlur","cushion","reset","inValid","style","triggerStyle","inputStyle","resetIconStyle","optionStyle","deviceInfo","onRenderContent","icon","iconStyle","searching"]),A=this.state,D=A.selected,R=A.open,k="bb-drop",z=!B.options||0===B.options.length,F=u,V=null;return z&&(V=w?B.loading:F&&u.length>1?B.noResult:B.waiting),y.default.createElement(C.Popover,{ref:this.refPopover,position:C.Position.Auto,visible:!s&&R,cushion:g,style:this.getStyle(S),className:(0,m.default)(M.isMobile?"pop-content":"drop-content",i+"-select-content",M.isMobile?"drop-mobile":null),wrapperClassName:(0,m.default)(r,(t={},l(t,k+"focus",R&&!s),l(t,k+"disabled",s),t)),onVisibleChange:this.handlePopoverVisibleChange,onPositionUpdated:this.handlePositionUpdated,onPositionReady:this.handleOptionReady},y.default.createElement(N,{prefix:i,className:(0,m.default)({"has-reset":v}),focus:c,deviceInfo:M,value:u,placeholder:a,inValid:b,icon:L,iconStyle:P,style:_,inputStyle:x,disabled:s,onChange:this.handleChangeSearchValue,onClick:d,onFocus:p,onBlur:f,onKeyDown:this.handleKeyDown},v&&D&&D.length>0?y.default.createElement(I.BaseBtn,{className:"iconfont "+i+"-reset fbc-select-reset",style:T,onMouseDown:this.handlePrevent,onClick:this.handleReset},String.fromCharCode(58982)):null),y.default.createElement(C.Content,null,y.default.createElement(E.Options,h({ref:this.refOptions,prefix:i,selected:D,popover:this.popover},B,{notFoundContent:V,onOptionChange:this.handleOptionChange,sizeFixer:0,style:this.getTrueOptionStyle(this.getStyle(O))}))))}});n.default=O},291:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(20),o=a(l),r=i(19),s=a(r),u=i(118),h=a(u),d=i(23),c=a(d),p=i(17),f=i(39),m=i(288),g=a(m),y=i(100),v=a(y),C=i(8),b=i(57),S=g.default.Input,I=1,_=o.default.createClass({displayName:"Address",mixins:[h.default,c.default],getInitialState:function(){return this.theme=(0,p.getThemeHelper)(),this.store=(0,p.getStore)(),{}},handleChange:function(e,t){var n=this.props.data;this.store.dispatch((0,f.SET_LOCATION_VALUE)({id:n.id,data:t}))},handleChangeAddressDetail:function(e){var t=this.props.data;this.store.dispatch((0,f.SET_LOCATION_VALUE)({id:t.id,data:{content:e.target.value}}))},handleChangeAddressZipCode:function(e){var t=this.props.data;this.store.dispatch((0,f.SET_LOCATION_VALUE)({id:t.id,data:{zipCode:e.target.value}}))},renderTips:function(t){return null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,l=t.valid,r=t.layout,u=this.getComponentLayoutStyleInfo(),h=l&&l.length>0,d=(0,p.getDeviceInfo)(),c=(0,p.getLang)(),f=b.FIELD_INFO_MAPPING[n.type]||null,m=n.componentType||I;return o.default.createElement("div",{className:(0,s.default)("fb_component",n.type),id:n.id,style:i},o.default.createElement("div",{className:"fb_componentText",style:u?u.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),o.default.createElement("div",{className:"fb_componentBody",style:u?u.bodyStyle:null},o.default.createElement("div",{className:(0,s.default)("fbc_content_withoutGap","fbc_widthCp"),style:{width:(this.isMobile()||r.isSqueeze?100:10*(n.cpWidth||8))+"%",marginTop:u?-(0,p.getStaticData)("CP_ITEM_GAP"):null}},m===I?o.default.createElement("div",{tabIndex:0,"aria-labelledby":this.ariaLabelTriggerOrder()},o.default.createElement(g.default,{key:"picker",deviceInfo:d,nodeList:a?a.struct:null,inValid:h,isMobile:this.isMobile(),geoLevel:+(n.minLevel||4),isFixedCountry:n.isLimitCountry||!1,fixedCountry:n.limitCountry||null,onChange:this.handleChange}),o.default.createElement("div",{className:"fbc_content_detail clear",key:"detail"},o.default.createElement(v.default,{className:(0,s.default)("fbc_multiItem fbc_input address",{error:h}),tabIndex:0,"aria-label":c.cAddressDetailsPlaceholder+"."+(a?a.content||"":""),style:(0,C.styleInject)(this.theme.getInputBoxStyle(this.theme.NORMAL),{width:""+(this.isMobile()||r.isSqueeze||n.isHideZipCode?"100%":"calc(75% - "+(0,p.getStaticData)("CP_ITEM_GAP")+"px)"),marginRight:this.isMobile()?0:null}),inputStyle:this.theme.getInputBoxExtraStyle(),deviceInfo:d,placeholder:c.cAddressDetailsPlaceholder,value:a?a.content:"",onChange:this.handleChangeAddressDetail}),n.isHideZipCode?null:o.default.createElement(v.default,{className:(0,s.default)("fbc_multiItem fbc_input zipCode",{error:h}),tabIndex:0,"aria-label":c.cAddressCodePlaceholder+"."+(a?a.zipCode||"":""),style:(0,C.styleInject)(this.theme.getInputBoxStyle(this.theme.NORMAL),{width:(this.isMobile()||r.isSqueeze?100:25)+"%",marginRight:this.isMobile()?0:null}),inputStyle:this.theme.getInputBoxExtraStyle(),deviceInfo:d,placeholder:c.cAddressCodePlaceholder,value:a?a.zipCode:"",onChange:this.handleChangeAddressZipCode}))):o.default.createElement(S,{value:a?a.content:"",inValid:h,isMobile:this.isMobile(),geoLevel:+(n.minLevel||4),deviceInfo:d,"aria-labelledby":this.ariaLabelTriggerOrder(),isFixedCountry:n.isLimitCountry||!1,fixedCountry:n.limitCountry||null,inputStyle:this.theme.getInputBoxExtraStyle(),icon:f?f.icon:null,iconStyle:{default:this.theme.getInputBoxIconStyle(this.theme.NORMAL),active:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),error:this.theme.getInputBoxIconStyle(this.theme.ERROR)},onChange:this.handleChange})),o.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":"."})))}});n.default=_,t.exports=n["default"]},292:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var l=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},o=i(20),r=a(o),s=i(21),u=a(s),h=i(6),d=a(h),c=i(19),p=a(c),f=i(118),m=a(f),g=i(23),y=a(g),v=i(100),C=a(v),b=i(17),S=i(8),I=i(57),_=i(37),x=i(261),E=i(39),N=r.default.createClass({displayName:"WxItem",mixins:[m.default,y.default],getInitialState:function(){return this.theme=(0,b.getThemeHelper)(),this.store=(0,b.getStore)(),this.wx=(0,b.getWx)(),this.measureSize=d.default.debounce(this._measureSize,120),{wxButtonWidth:null,wxButtonFontSize:null}},componentWillReceiveProps:function(t){this.props.contentWidth!==t.contentWidth&&this.measureSize()},componentDidMount:function(){this.measureSize(),this.unsubscribe=this.store.addChangeListener(this.handleStateChange)},componentWillUnmount:function(){
this.unsubscribe&&this.unsubscribe()},handleStateChange:function(t){t.type!==E._WX_AUTH_FAILED&&t.type!==E._WX_AUTH_SUCCEED||(this.requiring=!1,this.setState({requirePending:!1}))},_measureSize:function(){var t=this,n=this.wx.isWx&&!(0,S.inIframe)();if(!n)return void this.setState({wxButtonWidth:0,wxButtonFontSize:0});var i=(0,b.getLang)();this.fontInfo||(this.fontInfo=(0,S.getFontInfo)(u.default.findDOMNode(this.authBtn)));var a=i.cWxAuth,l=this.props.contentWidth,o=function(n){return(0,S.getTextWidth)(a,n+"px/"+t.fontInfo.lineHeight+" "+t.fontInfo.font)+2*(n-4)},r=this.fontInfo.fontSize,s=null;for(s=o(r);s>.4*l&&r>12;)r--,s=o(r);this.setState({wxButtonWidth:s,wxButtonFontSize:r})},handleRequireAuthMsg:function(e){var t=this.props.onRequireAuthMessage;this.requiring||(this.requiring=!0,this.setState({requirePending:!0},function(){t()}))},handleIncrease:function(e){var t=this.props,n=t.idx,i=t.onIncrease;i&&i(e,n)},handleRemove:function(e){var t=this.props,n=t.idx,i=t.onRemove;i&&i(e,n)},handleChange:function(e){var t=this.props,n=t.idx,i=t.onChange;i&&i(e,n)},handleBlur:function(e){var t=this.props,n=t.idx,i=t.onBlur;i&&i(e,n)},refAuthBtn:function(t){this.authBtn=t},render:function(){var t=this.props,n=t.icon,i=t.inValid,a=t.limit,l=t.idx,o=t.total,s=t.placeholder,u=t.value,h=t.hasError,c=t.deviceInfo,f=o===a,m=this.wx.isWx&&!(0,S.inIframe)(),g=this.state,y=g.wxButtonWidth,v=g.wxButtonFontSize,I=g.requirePending,x=(0,b.getLang)(),E=!1;if(i){var N=h("contentRegex");if(N&&d.default.isPlainObject(N)){if(N.info){var T=N.info.errorContent||[];E=T.indexOf(u)>-1}}else E=!0}var O={baseFontSize:v,baseWidth:y},M=x.cWxAuth;return r.default.createElement("div",{className:(0,p.default)("fbc_wxAuthWrapper","fbc_content_item")},r.default.createElement("div",{className:"fbc_sendAuth",style:{width:y?"calc(100% - "+(y+(0,b.getStaticData)("CP_ITEM_GAP"))+"px)":null}},r.default.createElement(C.default,{className:(0,p.default)("fbc_input","fbc_wx_content",{error:E}),deviceInfo:c,tabIndex:0,inValid:E,icon:n,placeholder:s,"aria-invalid":E,style:this.theme.getInputBoxStyle(this.theme.NORMAL,!!n),inputStyle:this.theme.getInputBoxExtraStyle(),iconStyle:{default:this.theme.getInputBoxIconStyle(this.theme.NORMAL),active:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),error:this.theme.getInputBoxIconStyle(this.theme.ERROR)},value:u||"",onChange:this.handleChange,onBlur:this.handleBlur},r.default.createElement("span",{className:"fbc_imOperate"},o>1?r.default.createElement(_.BaseBtn,{component:"a",className:"iconfont fbc_removeIcon",style:{default:this.theme.getInputBoxOptIconStyle(this.theme.NORMAL,{isRemove:!0}),hover:this.theme.getInputBoxOptIconStyle(this.theme.HOVER,{isRemove:!0}),active:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE,{isRemove:!0}),focus:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE,{isRemove:!0})},onClick:this.handleRemove},String.fromCharCode(58980)):null,o!==l+1||f?null:r.default.createElement(_.BaseBtn,{component:"a",className:"iconfont fbc_addIcon",style:{default:this.theme.getInputBoxOptIconStyle(this.theme.NORMAL),hover:this.theme.getInputBoxOptIconStyle(this.theme.HOVER),active:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE)},onClick:this.handleIncrease},String.fromCharCode(58979)))),m?r.default.createElement(_.BaseBtn,{className:"fbc_getWxAuth fbc_sendMsgAuth",ref:this.refAuthBtn,loading:I,style:{default:this.theme.getInputBoxExtButtonStyle(this.theme.NORMAL,O),active:this.theme.getInputBoxExtButtonStyle(this.theme.ACTIVE,O),focus:this.theme.getInputBoxExtButtonStyle(this.theme.ACTIVE,O),error:this.theme.getInputBoxExtButtonStyle(this.theme.ERROR,O),disabled:this.theme.getInputBoxExtButtonStyle(this.theme.DISABLED,O)},onClick:this.handleRequireAuthMsg},M):null))}}),T=r.default.createClass({displayName:"WeChatInputGroup",mixins:[m.default,y.default],getInitialState:function(){return this.theme=(0,b.getThemeHelper)(),this.getGroupFill=(0,S.memo)(this._getGroupFill),{}},_getGroupFill:function(t){return d.default.isArray(t)?t:[t]},handleIncrease:function(e,t){this.props.onIncreaseItem&&this.props.onIncreaseItem(e,t)},handleRemove:function(e,t){this.props.onRemoveItem&&this.props.onRemoveItem(e,t)},render:function(){for(var t=this.props,n=t.fill,i=t.data,a=t.inValid,l=t.valid,o=t.deviceInfo,s=t.limit,u=t.fieldExtInfo,h=t.onChange,d=t.onBlur,c=t.onRequireAuthMessage,p=[],f=this.getGroupFill(n),m=Math.max(1,f?f.length:1),g=0;g<m;g++)0===g?p.push(r.default.createElement(N,{key:"contentItemWx",deviceInfo:o,hasError:this.hasError,placeholder:i.placeholder,inValid:a,valid:l,idx:g,total:m,limit:s,value:f&&f[g],icon:u?u.icon:null,onIncrease:this.handleIncrease,onRemove:this.handleRemove,onRequireAuthMessage:c,onChange:h,onBlur:d})):p.push(r.default.createElement(x.InputGroupItem,{key:"contentItem"+g,deviceInfo:o,hasError:this.hasError,placeholder:i.placeholder,inValid:a,valid:l,idx:g,total:m,limit:s,value:f&&f[g],icon:u?u.icon:null,onIncrease:this.handleIncrease,onRemove:this.handleRemove,onChange:h,onBlur:d}));return r.default.createElement("div",{className:"fbc_content_groupList"},p)}}),O=r.default.createClass({displayName:"WeChat",mixins:[m.default,y.default],getInitialState:function(){return this.theme=(0,b.getThemeHelper)(),this.store=(0,b.getStore)(),{}},componentDidMount:function(){this.unsubscribe=this.store.addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe&&this.unsubscribe()},handleStateChange:function(t){},handleRequireAuthMsg:function(){var t=this.props.data;this.store.dispatch((0,E.WX_AUTH)({id:t.id}))},handleChange:function(e,t){var n=this.props.data;this.store.dispatch((0,E.SET_MULTI_INPUT_VALUE)({id:n.id,idx:t,value:e.target.value}))},handleBlur:function(e,t){var n=this.props.data;this.store.dispatch((0,E.BLUR_MULTI_INPUT)({id:n.id,idx:t,value:e.target.value}))},handleIncreaseItem:function(e,t){var n=this.props.data;this.store.dispatch((0,E.ADD_MULTI_INPUT_ITEM)({id:n.id,idx:t}))},handleRemoveItem:function(e,t){var n=this.props.data;this.store.dispatch((0,E.REMOVE_MULTI_INPUT_ITEM)({id:n.id,idx:t}))},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,s=t.layout,u=(0,b.getDeviceInfo)(),h=1===n.isAcceptMulti,d=I.FIELD_INFO_MAPPING[n.type],c=this.getComponentLayoutStyleInfo(),f=o&&o.length>0,m={deviceInfo:u,data:n,fill:a,inValid:f,valid:o,fieldExtInfo:d,contentWidth:this.getContentWidth()};return r.default.createElement("div",{className:(0,p.default)("fb_component",n.type),id:n.id,style:i},r.default.createElement("div",{className:"fb_componentText",style:c?c.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderError(this.theme.getComponentErrorStyle())),r.default.createElement("div",{className:"fb_componentBody",style:c?c.bodyStyle:null},r.default.createElement("div",{className:(0,p.default)("fbc_content","fbc_widthCp"),style:{width:(this.isMobile()||s.isSqueeze?100:10*(n.cpWidth||8))+"%",marginTop:c?0:null}},r.default.createElement(T,l({},m,{onChange:this.handleChange,onBlur:this.handleBlur,limit:!h&&1,onRequireAuthMessage:this.handleRequireAuthMsg,onIncreaseItem:this.handleIncreaseItem,onRemoveItem:this.handleRemoveItem}))),r.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=O,t.exports=n["default"]}});