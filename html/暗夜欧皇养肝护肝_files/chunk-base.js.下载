webpackJsonp([12,13],{193:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(20),l=a(o),s=i(6),r=a(s),u=i(19),d=a(u),h=i(118),c=a(h),p=i(23),f=a(p),m=i(100),g=a(m),v=i(17),y=i(57),I=i(37),b=i(39),S=i(55),E=i(8),_=["textarea","input"],C=l.default.createClass({displayName:"Input",mixins:[c.default,f.default],getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),this.store=(0,v.getStore)(),{}},handleChange:function(e){var t=this.props.data;this.store.dispatch((0,b.SET_VALUE)({id:t.id,value:(0,E.checkString)(e.target.value)}))},handleBlur:function(e){var t=this.props.data;this.store.dispatch((0,b.BLUR_INPUT)({id:t.id,value:(0,E.checkString)(e.target.value)}))},handleOpenWeChatScan:function(e){var t=this,n=this.props.data;(0,v.getWx)().scanQRCode().then(function(i){t.store.dispatch((0,b.SET_VALUE)({id:n.id,value:(0,E.checkString)(i.result)}))})},renderTips:function(t){var n=this.props,i=n.data,a=n.fill,o=n.valid;if(!i.isWordLimit)return null;var s=i.wordLimitFrom,u=i.wordLimitTo,h=o&&this.hasError("tips");return r.default.isNumber(s)&&r.default.isNumber(u)?l.default.createElement("p",{className:(0,d.default)("fbc_tips"),key:"tips",id:"tip-"+i.id,style:t,"aria-label":(0,v.getLang)().ariaInputWordRange({from:s,to:u})},l.default.createElement("span",{className:(0,d.default)("fbc_tip_input",{error:h})},(a||"").length),"/"+s+"~"+u):r.default.isNumber(s)?l.default.createElement("p",{className:(0,d.default)("fbc_tips"),key:"tips",id:"tip-"+i.id,style:t,"aria-label":(0,v.getLang)().ariaInputWordLimitFormFunc({from:s})},l.default.createElement("span",{className:(0,d.default)("fbc_tip_input",{error:h})},(0,v.getLang)().cInputWordLimitFormFunc({num:s}))):r.default.isNumber(u)?l.default.createElement("p",{className:(0,d.default)("fbc_tips"),key:"tips",id:"tip-"+i.id,style:t,"aria-label":(0,v.getLang)().ariaInputWordLimitToFunc({to:u})},l.default.createElement("span",{className:(0,d.default)("fbc_tip_input",{error:h})},(a||"").length),"/"+u):null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,s=t.layout,r=(0,v.getDeviceInfo)(),u=0===+n.isOnlySingle,h=r.isWx&&n.isUseWeChatScan,c=_.indexOf(n.type)===-1?y.FIELD_INFO_MAPPING[n.type]:null,p=this.getComponentLayoutStyleInfo(),f=n.cpLayout&&2===+n.cpLayout&&s.width<1,m=u?"textarea":"input",b=o&&o.length>0;return l.default.createElement("div",{className:(0,d.default)("fb_component",(0,S.getComponentType)(n)),id:n.id,style:i},l.default.createElement("div",{className:"fb_componentText",style:p?p.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),l.default.createElement("div",{className:"fb_componentBody",style:p?p.bodyStyle:null},l.default.createElement("div",{className:(0,d.default)("fbc_content","fbc_widthCp",{isUseWeChatScan:h}),style:{width:(this.isMobile()||f?100:10*(n.cpWidth||8))+"%",marginTop:p?0:null}},l.default.createElement(g.default,{className:(0,d.default)("fbc_input",{textarea:u,error:b}),component:m,inValid:b,tabIndex:0,deviceInfo:r,style:u?this.theme.getTextareaBoxStyle():this.theme.getInputBoxStyle(this.theme.NORMAL,!!c),inputStyle:this.theme.getInputBoxExtraStyle(),icon:c?c.icon:null,iconStyle:{default:this.theme.getInputBoxIconStyle(this.theme.NORMAL),active:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),error:this.theme.getInputBoxIconStyle(this.theme.ERROR)},"aria-labelledby":this.ariaLabelTriggerOrder(),"aria-required":n.isRequired,"aria-invalid":b,onChange:this.handleChange,onBlur:this.handleBlur,value:a||"",placeholder:n.placeholder}),h?l.default.createElement(I.BaseBtn,{className:"iconfont fbc_scanIcon",style:{default:this.theme.getInputBoxBtnStyle(this.theme.NORMAL),active:this.theme.getInputBoxBtnStyle(this.theme.ACTIVE)},onClick:this.handleOpenWeChatScan},String.fromCharCode(58960)):null),l.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":""+(u?(0,v.getLang)().ariaMultiLine+" ":"")+(n.placeholder||"")+"."})))}});n.default=C,t.exports=n["default"]},195:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(20),l=a(o),s=i(19),r=a(s),u=i(118),d=a(u),h=i(23),c=a(h),p=i(17),f=i(57),m=i(39),g=i(261),v=a(g),y=l.default.createClass({displayName:"MultipleInput",mixins:[d.default,c.default],getInitialState:function(){return this.theme=(0,p.getThemeHelper)(),this.store=(0,p.getStore)(),{}},handleChange:function(e,t){var n=this.props.data;this.store.dispatch((0,m.SET_MULTI_INPUT_VALUE)({id:n.id,idx:t,value:e.target.value}))},handleBlur:function(e,t){var n=this.props.data;this.store.dispatch((0,m.BLUR_MULTI_INPUT)({id:n.id,idx:t,value:e.target.value}))},handleIncreaseItem:function(e,t){var n=this.props.data;this.store.dispatch((0,m.ADD_MULTI_INPUT_ITEM)({id:n.id,idx:t}))},handleRemoveItem:function(e,t){var n=this.props.data;this.store.dispatch((0,m.REMOVE_MULTI_INPUT_ITEM)({id:n.id,idx:t}))},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,s=t.layout,u=(0,p.getDeviceInfo)(),d=1===n.isAcceptMulti,h=f.FIELD_INFO_MAPPING[n.type],c=this.getComponentLayoutStyleInfo(),m=o&&o.length>0,g=n.cpLayout&&2===+n.cpLayout&&s.width<1;return l.default.createElement("div",{className:(0,r.default)("fb_component",n.type),id:n.id,style:i},l.default.createElement("div",{className:"fb_componentText",style:c?c.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderError(this.theme.getComponentErrorStyle())),l.default.createElement("div",{className:"fb_componentBody",style:c?c.bodyStyle:null},l.default.createElement("div",{className:(0,r.default)("fbc_content","fbc_widthCp"),style:{width:(this.isMobile()||g?100:10*(n.cpWidth||8))+"%",marginTop:c?0:null}},l.default.createElement(v.default,{key:"inputGroup",deviceInfo:u,data:n,fill:a,inValid:m,ariaTriggerOrder:this.ariaLabelTriggerOrder(),valid:o,fieldExtInfo:h,contentWidth:this.getContentWidth(),onChange:this.handleChange,onBlur:this.handleBlur,limit:!d&&1,onIncreaseItem:this.handleIncreaseItem,onRemoveItem:this.handleRemoveItem})),l.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=y,t.exports=n["default"]},222:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(20),l=a(o),s=i(21),r=a(s),u=i(6),d=a(u),h=i(19),c=a(h),p=i(118),f=a(p),m=i(23),g=a(m),v=i(100),y=a(v),I=i(17),b=i(39),S=i(8),E=i(55),_=l.default.createClass({displayName:"Number",mixins:[f.default,g.default],getInitialState:function(){return this.theme=(0,I.getThemeHelper)(),this.store=(0,I.getStore)(),this.measureSize=d.default.debounce(this._measureSize,120),{unitWidth:null}},componentDidMount:function(){this.measureSize()},_measureSize:function(){var t=this,n=this.props.data;if(n.unit){this.fontInfo||(this.fontInfo=(0,S.getFontInfo)(r.default.findDOMNode(this.unitSpan)));var i=n.unit,a=function(n){return(0,S.getTextWidth)(i,n+"px/"+t.fontInfo.lineHeight+" "+t.fontInfo.font)},o=this.fontInfo.fontSize,l=null;l=a(o),this.setState({unitWidth:l})}},handleChange:function(e){var t=this.props.data;this.store.dispatch((0,b.SET_VALUE)({id:t.id,value:e.target.value}))},handleBlur:function(e){var t=this.props.data;this.store.dispatch((0,b.BLUR_NUMBER)({id:t.id,value:e.target.value}))},renderTips:function(t){var n=this.props,i=n.data,a=n.valid,o=a&&this.hasError("tips"),s=i.numRangeFrom,r=i.numRangeTo;if(!i.isNumRange)return null;var u=null;return d.default.isNumber(s)&&d.default.isNumber(r)?u=+s===+r?(0,I.getLang)().cNumberValueEqualFunc({number:s}):(0,I.getLang)().cNumberValueRangeHintFunc({numRangeFrom:s,numRangeTo:r}):d.default.isNumber(s)?u=(0,I.getLang)().cNumberValueMoreThanValueFunc({numRangeFrom:s}):d.default.isNumber(r)&&(u=(0,I.getLang)().cNumberValueLessThanValueFunc({numRangeTo:r})),u?l.default.createElement("p",{className:(0,c.default)("fbc_tips"),key:"tips",id:"tip-"+i.id,style:t,"aria-label":u},l.default.createElement("span",{className:(0,c.default)("fbc_tip_input",{error:o})},u)):null},refUnitSpan:function(t){this.unitSpan=t},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,s=t.layout,r=this.state.unitWidth,u=(0,I.getDeviceInfo)(),h=this.getComponentLayoutStyleInfo(),p=o&&o.length>0,f=n.cpLayout&&2===+n.cpLayout&&s.width<1,m=(0,I.getCurrentLang)(),g=this.theme.getInputBoxStyle(this.theme.NORMAL,!1);return n.unit&&(g="ar"===m?d.default.assign({paddingLeft:r+8},g):d.default.assign({paddingRight:r+8},g)),l.default.createElement("div",{className:(0,c.default)("fb_component",(0,E.getComponentType)(n)),id:n.id,style:i},l.default.createElement("div",{className:"fb_componentText",style:h?h.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),l.default.createElement("div",{className:"fb_componentBody",style:h?h.bodyStyle:null},l.default.createElement("div",{className:(0,c.default)("fbc_content","fbc_widthCp"),style:{width:(this.isMobile()||f?100:10*(n.cpWidth||8))+"%",marginTop:h?0:null}},l.default.createElement(y.default,{className:(0,c.default)("fbc_input",{error:p}),component:"input",inValid:p,tabIndex:0,deviceInfo:u,style:g,inputStyle:this.theme.getInputBoxExtraStyle(),iconStyle:{default:this.theme.getInputBoxIconStyle(this.theme.NORMAL),active:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),error:this.theme.getInputBoxIconStyle(this.theme.ERROR)},"aria-labelledby":this.ariaLabelTriggerOrder(),"aria-required":n.isRequired,"aria-invalid":p,onChange:this.handleChange,onBlur:this.handleBlur,value:a||"",placeholder:n.placeholder}),n.unit?l.default.createElement("span",{className:(0,c.default)("fbc_unit"),ref:this.refUnitSpan,style:this.theme.getInputBoxUnitStyle()},n.unit):null),l.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=_,t.exports=n["default"]},223:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}Object.defineProperty(n,"__esModule",{value:!0}),n.RateGroup=void 0;var l=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=i(6),r=a(s),u=i(20),d=a(u),h=i(118),c=a(h),p=i(23),f=a(p),m=i(17),g=i(19),v=a(g),y=i(37),I=i(39),b=i(8),S=i(55),E={1:"star",2:"heart",3:"thumb",4:"heatBar",5:"rose",6:"number"},_=d.default.createClass({displayName:"RateItem",mixins:[f.default],getInitialState:function(){return this._eventBind(this.props),{}},componentWillReceiveProps:function(t){t.index!==this.props.index&&this._eventBind(t)},_eventBind:function(t){this.handleMouseEnterHalf=this._mouseEnter.bind(this,t.index-.5),this.handleMouseLeaveHalf=this._mouseLeave.bind(this,t.index-.5),this.handleClickHalf=this._click.bind(this,t.index-.5),this.handleMouseEnter=this._mouseEnter.bind(this,t.index),this.handleMouseLeave=this._mouseLeave.bind(this,t.index),this.handleClick=this._click.bind(this,t.index)},_mouseEnter:function(t,e){var n=this.props.onMouseEnter;n&&n(e,t)},_mouseLeave:function(t,e){var n=this.props.onMouseLeave;n&&n(e,t)},_click:function(t,e){e.stopPropagation();var n=this.props.onChange;n&&n(e,t)},isSelected:function(t){var n=this.props.value;return t<=n},handleKeyDown:function(e){13!==e.keyCode&&32!==e.keyCode||this.handleClick(e)},render:function(){var t=this.props,n=t.allowHalf,i=t.position,a=t.index,o=t.style,l=i>a,s=i+.5===a,r=i===a,u=this.isSelected(a-.5),h=this.isSelected(a);return d.default.createElement("li",{className:(0,v.default)("fbc_rateItemWrapper",{"rateItem-prev-hover":l,"rateItem-current-hover":r,"rateItem-current-half-hover":s,"rateItem-fade":i&&h&&i<a,"rateItem-half-fade":i&&u&&i+.5<a}),style:o,role:"option",tabIndex:0,"aria-selected":h,"aria-label":a,"aria-live":"assertive",onKeyDown:this.handleKeyDown},d.default.createElement("span",{className:"fbc_rateItemContainer"},n?d.default.createElement(y.BaseBtn,{className:(0,v.default)("fbc_rateItem first",{selected:u}),onClick:this.handleClickHalf,onMouseEnter:this.handleMouseEnterHalf,onMouseLeave:this.handleMouseLeaveHalf}):null,d.default.createElement(y.BaseBtn,{className:(0,v.default)("fbc_rateItem",{selected:h}),onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave})))}}),C=d.default.createClass({displayName:"RateHeatBoxItem",mixins:[f.default],getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),{}},handleMouseEnter:function(e){var t=this.props,n=t.onMouseEnter,i=t.index;n&&n(e,i)},handleMouseLeave:function(e){var t=this.props,n=t.onMouseLeave,i=t.index;n&&n(e,i)},handleClick:function(e){e.stopPropagation();var t=this.props,n=t.onChange,i=t.index;n&&n(e,i)},isSelected:function(t){var n=this.props.value;return t<=n},render:function(){var t=this.props,n=t.colorForm,i=t.colorTo,a=t.total,o=t.position,s=t.index,r=t.style,u=o>s,h=o===s,c=this.isSelected(s),p=(0,b.colorMix)(i,n,s/a);return d.default.createElement(y.BaseBtn,{component:"li",className:(0,v.default)("fbc_heatItem",{"heatItem-prev-hover":u,"heatItem-current-hover":h,"heatItem-fade":o&&c&&o<s}),style:l({},r,{width:"calc((100% - "+4*(a-1)+"px)/"+a+")",height:20,backgroundColor:c||u||h?p:null,borderColor:c||u||h?(0,b.lighten)(p,.1):null}),tabIndex:0,"aria-selected":c,"aria-label":s,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick})}}),T=d.default.createClass({displayName:"RateNumItem",mixins:[f.default],getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),{}},handleMouseEnter:function(e){var t=this.props,n=t.onMouseEnter,i=t.index;n&&n(e,i)},handleMouseLeave:function(e){var t=this.props,n=t.onMouseLeave,i=t.index;n&&n(e,i)},handleClick:function(e){e.stopPropagation();var t=this.props,n=t.onChange,i=t.index;n&&n(e,i)},isSelected:function(t){var n=this.props.value;return t===n},render:function(){var t=this.props,n=t.position,i=t.index,a=t.style,o=n===i,l=this.isSelected(i),s=r.default.assign({},a,this.theme.getInputBoxStyle(this.theme.NORMAL));return(o||l)&&(s=r.default.assign({},s,this.theme.getRateNumberStyle())),d.default.createElement(y.BaseBtn,{component:"li",className:(0,v.default)("fbc_numberItem",{"numberItem-current-hover":o,"numberItem-fade":n&&l&&n!==i}),style:s,tabIndex:0,"aria-selected":l,"aria-label":i,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick},i)}}),x=d.default.createClass({displayName:"RateGroup",mixins:[f.default],getDefaultProps:function(){return{num:5}},getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),{position:null}},handleMouseEnterGroup:function(){this.hoverActived=!0},handleMouseLeaveGroup:function(){this.hoverActived=!1,this.setState({position:!1})},handleMouseEnter:function(e,t){this.hoverActived&&this.setState({position:t})},handleMouseLeave:function(e,t){},renderTips:function(){var t=this.props.data,n=t.rateTipsLeft,i=t.rateTipsMiddle,a=t.rateTipsRight;return n||a||i?d.default.createElement("p",{className:"fbc_rateTips",style:this.theme.getComponentTipsStyle()},d.default.createElement("span",{className:"fbc_rateTipsText left"},n||" "),d.default.createElement("span",{className:"fbc_rateTipsText middle"},i||" "),d.default.createElement("span",{className:"fbc_rateTipsText right"},a||" ")):null},render:function(){var t=this.props,n=t.isMobile,i=t.num,a=t.onChange,s=t.type,r=t.value,u=t.data,h=t.contentWidth,c=o(t,["isMobile","num","onChange","type","value","data","contentWidth"]),p=u.isAllowHalf,f=u.isShowTips,m=u.tipsPosition,g=u.heatBarColorForm,y=u.heatBarColorTo,I=this.state.position,b=[],S=Math.min(+i,20),x={maxWidth:100/S+"%",width:n?38:null},O=null,N=_,L={style:x,position:I,value:r,type:s,allowHalf:p,onChange:a,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},M=!1;4===s?(N=C,L.colorForm=g,L.colorTo=y,L.total=S):6===s?(N=T,(n||h<420)&&h/S<20?(x.maxWidth=Math.floor(h/Math.ceil(S/2)),M=!0):38*S>=h&&(O={fontSize:12})):(n&&h<=38*S&&(O={paddingRight:10}),!n&&h<=33*S&&(x.maxWidth="calc("+100/S+"% - 5px)"));for(var w=0;w<S;w++)b.push(d.default.createElement(N,l({key:"rateItem"+w,index:w+1},L)));return d.default.createElement("div",{className:(0,v.default)("fbc_rateGroup",E[s||1]),tabIndex:0,"aria-labelledby":c["aria-labelledby"]},!f||null!=m&&1!==m?null:this.renderTips(),d.default.createElement("ul",{className:(0,v.default)("fbc_rateItemContent clear",{"rate_multiline":M}),style:O,onMouseEnter:this.handleMouseEnterGroup,onMouseLeave:this.handleMouseLeaveGroup},b),f&&2===m?this.renderTips():null)}});n.RateGroup=x;var O=d.default.createClass({displayName:"Rate",mixins:[c.default,f.default],getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),this.store=(0,m.getStore)(),{}},handleRateChange:function(e,t){var n=this.props.data;this.store.dispatch((0,I.SET_RATE)({id:n.id,value:t}))},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.layout,l=this.getComponentLayoutStyleInfo();return d.default.createElement("div",{className:(0,v.default)("fb_component",(0,S.getComponentType)(n)),id:n.id,style:i},d.default.createElement("div",{className:"fb_componentText",style:l?l.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderError(this.theme.getComponentErrorStyle())),d.default.createElement("div",{className:"fb_componentBody",style:l?l.bodyStyle:null},d.default.createElement("div",{className:(0,v.default)("fbc_content fbc_widthCp"),style:{width:(this.isMobile()||o.isSqueeze||4!==n.rateIcon?100:10*(n.cpWidth||8))+"%",marginTop:l?0:null}},d.default.createElement(x,{type:n.rateIcon,num:n.rateMax,value:a,isMobile:this.isMobile(),data:n,contentWidth:this.getContentWidth(),"aria-labelledby":this.ariaLabelTriggerOrder(),onChange:this.handleRateChange}),d.default.createElement("div",{className:"clearB"})),d.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=O},224:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.Option=void 0;var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l=function(){function t(t,n){var i=[],a=!0,o=!1,l=void 0;try{for(var s,r=t[Symbol.iterator]();!(a=(s=r.next()).done)&&(i.push(s.value),!n||i.length!==n);a=!0);}catch(t){o=!0,l=t}finally{try{!a&&r["return"]&&r["return"]()}finally{if(o)throw l}}return i}return function(n,i){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=i(20),r=a(s),u=i(6),d=a(u),h=i(19),c=a(h),p=i(118),f=a(p),m=i(23),g=a(m),v=i(17),y=i(37),I=i(95),b=i(39),S=i(100),E=a(S),_=i(55),C=i(8),T=n.Option=r.default.createClass({displayName:"Option",mixins:[g.default],handleClick:function(){var t=this.props,n=t.onSelect,i=t.data;n&&n(i.sId),this.operator.blur()},handleARIA_select:function(e){if(this.operator&&this.operator.isFocus()&&(13===e.keyCode||32===e.keyCode)){e.preventDefault();var t=this.props,n=t.onSelect,i=t.data;n&&n(i.sId)}},handleStopPropagation:function(e){e.stopPropagation()},handleTextBoxChange:function(e){var t=this.props,n=t.onInputChange,i=t.data;n&&n(i.sId,e.target.value)},refOperator:function(t){this.operator=t},renderLimit:function(t){var n=this.props,i=n.showLimit,a=n.tipsStyle,o=n.isLinked,l=n.displayLinkedQuota;if(null!=t&&isFinite(t)){var s="";if((i||o&&l)&&t>0?s=(0,v.getLang)().cQuotaRemainingFunc({remaining:t}):t<=0&&(s=(0,v.getLang)().cQuotaRemainingFull),s)return r.default.createElement("span",{className:"fbc_optionTips","aria-label":", "+s+" ",style:a},s)}return null},renderExtInput:function(){var t=this.props,n=t.active,i=t.activeValue,a=t.afterInput,o=t.inputStyle,l=t.isRequired,s=t.inputExtStyle,u=t.inputInValid;if(n&&a){var h=d.default.isPlainObject(i)?i.value:"",p=(0,v.getDeviceInfo)();return r.default.createElement("div",{className:"fbc_optionInputWrapper"},r.default.createElement(E.default,{className:(0,c.default)("fbc_input","fbc_optionInput",{error:u}),deviceInfo:p,tabIndex:0,value:h,style:o,inputStyle:s,onTouchStart:this.handleStopPropagation,onMouseDown:this.handleStopPropagation,onKeyDown:this.handleStopPropagation,onClick:this.handleStopPropagation,onChange:this.handleTextBoxChange},l?r.default.createElement("span",{className:"fbc_required",style:s},"*"):null),r.default.createElement("div",{className:"clearB"}))}return null},render:function(){var t=this.props,n=t.data,i=t.isCheckbox,a=t.optionLayoutType,o=t.style,s=t.inValid,u=t.optStyle,d=t.active,h=t.afterInput,p=t.limitInfo,f=t.chooseMax,m=t.hideNoQuota,g=t.onRenderOptionNum,v=t.onRenderRichContent,b=t.isLinked,S=t.linkQuota,E=t.linkLimit,_=i?I.BaseCheckbox:I.BaseRadio,T=1/0;if(p||b&&null!=S){var x=(0,C.quotaCalculate)(p,S);T=x.remaining}if(m&&T<=0&&!b)return null;if(b&&0===E)return null;var O=T<=0||!d&&f,N=g(),L=l(N,2),M=L[0],w=L[1];return r.default.createElement(y.BaseBtn,{component:"li",className:(0,c.default)("fbc_optionsLi",{"displayAfterInput":d&&h,"error":s,"disabled":O,"clearB":a&&a>1&&M%a===1}),style:o,disabled:O,onClick:this.handleClick,onKeyDown:this.handleARIA_select,role:i?"checkbox":"radio","aria-disabled":O,"aria-checked":!!d,tabIndex:0,ref:this.refOperator},r.default.createElement(_,{className:(0,c.default)("fbc_optionButton"),disabled:O,active:d,style:u}),r.default.createElement("span",{className:"fbc_optionLabel"},r.default.createElement("span",{className:"fbc_optionText"},w,v(n.value?[].concat(n.value):"",n.style||null)),this.renderLimit(T)),this.renderExtInput())}}),x=r.default.createClass({displayName:"Choice",mixins:[f.default,g.default],getInitialState:function(){return this.theme=(0,v.getThemeHelper)(),this.store=(0,v.getStore)(),{}},handleSelectOption:function(t){var n=this.props.data;this.store.dispatch((0,b.SELECT_OPT)({id:n.id,value:t}))},handleSetOptionInputValue:function(t,n){var i=this.props.data;this.store.dispatch((0,b.SET_OPT_EXT_VALUE)({id:i.id,data:{optId:t,value:n}}))},handleRenderOptionNum:function(){var t=this.props.data,n=++this.optionNum;return t.isAutoNo?[n,(0,_.OPTION_NUM)(n,t.autoNo)]:[n,null]},hasValue:function(t){var n=this.props.fill,i=!1;return d.default.forEach(n||[],function(n){if(t===n||d.default.isPlainObject(n)&&n.id===t)return i=!0,!1}),i},getActiveValue:function(t){var n=this.props.fill,i=null;return d.default.forEach(n||[],function(n){if(t===n||d.default.isPlainObject(n)&&n.id===t)return i=n,!1}),i},getOptionsLayoutType:function(){var t=this.props,n=t.data,i=t.inSqueeze,a=n.optionsLayout||0;return(this.isMobile()||i)&&(a=n.isAfterInput||n.isLimitOptions&&n.isShowOptionLimit&&n.optionsQuotaInfo?0:Math.min(2,a)),a},renderOptions:function(t){var n=this;this.optionNum=0;var i=this.props,a=i.data,l=i.fill,s=i.valid,u=i.linkedApt,h=i.linkQuota,c=i.linkLimit,p=i.displayLinkedQuota,f=a.type,m="checkbox"===f||a.isCheckbox,g=[],y=s&&s.length>0,I=1===a.isLimitChooseNum&&m,b=a.chooseNumTo,S=I&&null!=b&&""!==b,E=this.optionBlockStyle=this.optionBlockStyle||{default:this.theme.getOptionStyle(this.theme.NORMAL),hover:this.theme.getOptionStyle(this.theme.HOVER),active:this.theme.getOptionStyle(this.theme.ACTIVE),disabled:this.theme.getOptionStyle(this.theme.DISABLED)},_=this.hasError("inputRequired"),C={__fill:l||null,__linkedQuota:h||null,isCheckbox:m,inValid:y,optionLayoutType:t,showLimit:a.isShowOptionLimit,hideNoQuota:a.isHideFullOption,chooseMax:S&&l&&l.length>=+b,onSelect:this.handleSelectOption,onInputChange:this.handleSetOptionInputValue,onRenderOptionNum:this.handleRenderOptionNum,onRenderRichContent:this.renderRichContent,style:u?null:E,optStyle:this.theme.getOptionIconStyle(),inputStyle:u?null:this.theme.getChoiceInputBoxStyle(),inputExtStyle:u?null:this.theme.getInputBoxExtraStyle(),tipsStyle:u?null:this.theme.getComponentTipsStyle()},x=null;a.isLimitOptions&&a.optionsQuotaInfo&&(x=a.optionsQuotaInfo);var O=!(!u||!h);if(d.default.forEach(a.options,function(t,i){var l=n.hasValue(t.sId),s=l?n.getActiveValue(t.sId):null,d=x&&x[t.sId]?x[t.sId]:null,f=_&&_.info&&_.info.indexOf(t.sId)>-1,m=null,v=null;O&&(m=h[t.sId]),u&&c&&(v=c[t.sId]),g.push(r.default.createElement(T,o({data:t,key:"opt-"+t.sId,index:i,active:l,limitInfo:d,isLinked:O,linkQuota:m,linkLimit:v,displayLinkedQuota:p,activeValue:s,afterInput:a.isAfterInput,isRequired:a.afterInputIsRequired,inputInValid:f},C)))}),1===a.isAddOtherOption){var N=this._otherOpt=this._otherOpt||{sId:a.otherId,id:0,value:a.otherOptionTitle||(0,v.getLang)().cOptionOtherDefault},L=this.hasValue(N.sId),M=L?this.getActiveValue(N.sId):null,w=x&&x[N.sId]?x[N.sId]:null,R=_&&_.info&&_.info.indexOf(N.sId)>-1,P=null,B=null;O&&(P=h[a.otherId]),u&&c&&(B=c[a.otherId]),g.push(r.default.createElement(T,o({data:N,key:"opt-"+N.sId,active:L,limitInfo:w,isLinked:O,linkQuota:P,linkLimit:B,displayLinkedQuota:p,activeValue:M,inputInValid:R,afterInput:!0,isRequired:a.otherOptionIsRequired},C)))}return g},renderTips:function(t){var n=this.props,i=n.data,a=n.valid,o="checkbox"===i.type||i.isCheckbox;if(1===i.isLimitChooseNum&&o){var l=(0,v.getLang)(),s=a&&this.hasError("tips"),u=i.chooseNumFrom,d=i.chooseNumTo,h=null!=u&&""!==u,p=null!=d&&""!==d,f="";if(h&&p?f=+u===+d?l.cOptionsLimitEqualFunc({num:+u}):l.cOptionsLimitRangeFunc({numForm:+u,numTo:+d}):p?f=l.cOptionsLessThanNumFunc({numTo:+d}):h&&(f=l.cOptionsMoreThanNumFunc({numForm:+u})),f)return r.default.createElement("p",{className:(0,c.default)("fbc_tips"),key:"tips",id:"tip-"+i.id,style:t,"aria-label":f},r.default.createElement("span",{className:(0,c.default)("fbc_tip_input",{error:s})},f))}return null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.linkedApt,o=n.type,l=this.getComponentLayoutStyleInfo(),s=this.getOptionsLayoutType();return r.default.createElement("div",{className:(0,c.default)("fb_component",(0,_.getComponentType)(n)),id:n.id,style:i},r.default.createElement("div",{className:"fb_componentText",style:l?l.titleStyle:null},this.renderTitle(a?null:this.theme.getComponentTitleStyle()),this.renderSubtitle(a?null:this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),r.default.createElement("div",{className:"fb_componentBody",style:l?l.bodyStyle:null},r.default.createElement("div",{className:(0,c.default)("fbc_content","fbc_options_content","fbc_options_layout_"+s),style:{marginTop:l?0:null}},r.default.createElement("ul",{role:o+"group",tabIndex:0,"aria-labelledby":this.ariaLabelTriggerOrder()},this.renderOptions(s)),r.default.createElement("div",{className:"clearB"})),r.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=x},225:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var n=0,i=Array(t.length);n<t.length;n++)i[n]=t[n];return i}return Array.from(t)}function l(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=function(){function t(t,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,i,a){return i&&t(n.prototype,i),a&&t(n,a),n}}(),u=i(6),d=a(u),h=i(20),c=a(h),p=i(19),f=a(p),m=i(17),g=i(8),v=i(226),y=a(v),I=i(118),b=a(I),S=i(232),E=i(23),_=a(E),C=i(39),T=i(55),x='15px/1 Helvetica,"Nimbus Sans L",-apple-system,BlinkMacSystemFont',O=function(){function t(n){var i=this;l(this,t),this.opt=[],this.lv0=[],this.maxDepth=1,this.memoLevel={},d.default.forEach(n,function(t,n){var a=d.default.assign({},t);null===t.pId&&(a.depth=0,i.lv0.push(a)),i.opt.push(a)}),this.setDepth()}return r(t,[{key:"setDepth",value:function(){var t=this,n=function n(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null!=i.depth)return i.depth+a;if(null===i.pId)return a;var o=t.getOption(i.pId);return n(o,a+1)};d.default.forEach(this.opt,function(i){if(null==i.depth&&(i.depth=n(i)),i.size=(0,g.getTextWidth)(i.content,x),i.pId){var a=t.getOption(i.pId);a.hasNext=!0}i.depth+1>t.maxDepth&&(t.maxDepth=i.depth+1)})}},{key:"getChildren",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.memoLevel[t]||(this.memoLevel[t]=d.default.filter(this.opt,function(n){return n.pId===t})),this.memoLevel[t]}},{key:"getMaxWidth",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Math.ceil(Math.max.apply(Math,o(d.default.map(this.getChildren(t),function(t){return t.size}))))}},{key:"getOption",value:function(t){return d.default.find(this.opt,{id:t})}}]),t}(),N=c.default.createClass({displayName:"MultiDropDown",mixins:[_.default],getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),{}},handleSelectOption:function(e,t){var n=this.props,i=n.onChange,a=n.level,o=n.options;i&&i(e,a,d.default.find(o,{sId:t}))},handleResetOption:function(e){var t=this.props,n=t.onChange,i=t.level;n&&n(e,i,null)},getOptions:function(t){return this._getOptions||(this._getOptions=(0,g.memo)(function(t){var n=[],i=[];return d.default.forEach(t,function(t){var a={id:t.sId,_id:t.id,sId:t.sId,value:t.content,remaining:1/0};2===t.type?n.push(a):i.push(a)}),i.concat(n)})),this._getOptions(t)},renderContent:function(t){var n=this.props.loading,i=t.text,a=t.placeholder,o=t.iconStyle;return[c.default.createElement("span",{key:"content-text",className:"fbc_selectRes"},i||a),n?c.default.createElement("span",{key:"loading",className:"fbc_selectArrow",style:o},c.default.createElement("span",{className:"fbc_select-drop-loading"})):c.default.createElement("span",{key:"arrow",className:"iconfont fbc_selectArrow",style:o},String.fromCharCode(58983))]},renderOption:function(t){var n=this.props.value,i=n===t.id,a={active:i,tipsStyle:this.theme.getComponentTipsStyle()};return c.default.createElement(S.DropDownOption,s({key:t.sId},t,a))},render:function(){var t=this.props,n=t.value,i=t.placeholder,a=t.inValid,o=t.options,l=t.style,s=t.deviceInfo,r={default:n?this.theme.getInputBoxStyle(this.theme.NORMAL):this.theme.getInputBoxStyle(this.theme.PLACEHOLDER),active:n?this.theme.getInputBoxStyle(this.theme.ACTIVE):this.theme.getInputBoxStyle(this.theme.PLACEHOLDER)},u=this.getOptions(o);return l&&(r=(0,g.styleInject)(r,l)),c.default.createElement(y.default,{className:(0,f.default)("fbc_select","fbc_multiItem",{hasValue:n,error:a}),optionsClassName:(0,f.default)("fbc_options"),deviceInfo:s,placeholder:i||(0,m.getLang)().cSelectorPlaceholder,value:n,options:u,reset:!0,style:r,triggerStyle:this.theme.getInputBoxTriggerStyle(),iconStyle:{default:this.theme.getDropDownTriggerIconStyle(this.theme.NORMAL),active:this.theme.getDropDownTriggerIconStyle(this.theme.ACTIVE)},resetIconStyle:{default:this.theme.getDropDownResetIconStyle(this.theme.NORMAL),hover:this.theme.getDropDownResetIconStyle(this.theme.HOVER),active:this.theme.getDropDownResetIconStyle(this.theme.ACTIVE)
},optionStyle:this.theme.getDropDownOptionMenuStyle(),onRenderContent:this.renderContent,onRenderOption:this.renderOption,onReset:this.handleResetOption,onChange:this.handleSelectOption})}}),L=c.default.createClass({displayName:"MultiLevelPicker",mixins:[_.default],getDefaultProps:function(){return{nodeList:null}},getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),this.queue=Promise.resolve(!0),this._placeholderWidthCache={},{}},componentDidMount:function(){this.mounted=!0},componentWillUpdate:function(t){},componentWillUnmount:function(){this._placeholderWidthCache=null,this.mounted=!1},getPlaceholderByPid:function(t){var n=this.props,i=n.placeholder,a=n.fill,o=(0,m.getLang)(),l=a?a.current:null,s=l?d.default.find(l,{id:t}):null,r=i||{},u=s&&3===s.type?o.cFillingPlaceholder:o.cSelectorPlaceholder,h=r[t];return h||u},getPlaceholderWidth:function(t){return this._placeholderWidthCache[t]||(this._placeholderWidthCache[t]=Math.ceil((0,g.getTextWidth)(t,x))),this._placeholderWidthCache[t]},handleChangeSelect:function(e,t,n){var i=this.props.onChange;i&&i(e,{lvl:t,opt:n})},handleChangeInput:function(e,t,n){var i=this.props.onChange;i&&i(e,{node:t,value:n})},renderSelect:function(t,n,i){var a=this.props,o=a.isMobile,l=a.inValid,s=a.deviceInfo,r=a.fill,u=r?r.current:null,d=u?u[t]:null,h=u&&u[t-1]?u[t-1].id:-1,p=null,f=r?r.value:null;d&&(p=d.sId);var m=[];if(n&&1===n.length&&3===n[0].type)m.push(c.default.createElement(S.AfterInput,{key:"input"+t,className:"fbc_multiItem",deviceInfo:s,placeholder:n[0].content,inputInValid:l,value:f,id:n[0].sId,onChange:this.handleChangeInput}));else{var g=this.getPlaceholderByPid(h),v=this.getPlaceholderWidth(g);m.push(c.default.createElement(N,{options:n,level:t,key:"levelSelect"+t,deviceInfo:s,style:o?null:{width:Math.max(i,v)+74},value:p,placeholder:g,inValid:l,onChange:this.handleChangeSelect})),d&&2===d.type&&m.push(c.default.createElement(S.AfterInput,{key:"other"+t,className:"fbc_multiItem",deviceInfo:s,inputInValid:l,value:f,id:d.sId,placeholder:null,onChange:this.handleChangeInput}))}return m},renderLevelSelect:function(){var t=[],n=this.props,i=n.fill,a=n.levelOptions,o=i?i.current:null,l=a.lv0;if(t=t.concat(this.renderSelect(0,l,a.getMaxWidth(null))),o)for(var s=0;o[s];){var r=o[s],u=a.getChildren(r.id);u.length>0&&(t=t.concat(this.renderSelect(s+1,u,a.getMaxWidth(r.id)))),s++}return t},render:function(){return c.default.createElement("div",{className:"fbc_multiLevelPicker clear"},this.renderLevelSelect())}}),M=c.default.createClass({displayName:"MultiLevel",mixins:[b.default,_.default],getInitialState:function(){return this.theme=(0,m.getThemeHelper)(),this.store=(0,m.getStore)(),this.getLevelOptions=(0,g.memo)(this._getLevelOptions),{}},_getLevelOptions:function(t){return new O(t)},handleChange:function(e,t){var n=this.props.data;this.store.dispatch((0,C.SET_MULTILEVEL_VALUE)({id:n.id,data:t}))},handleBlur:function(e,t){var n=this.props,i=n.fill;n.data;i&&!i.select&&t&&t.length>0},renderTips:function(t){return null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,l=t.layout,s=this.getComponentLayoutStyleInfo(),r=o&&o.length>0,u=(0,m.getDeviceInfo)(),d=this.getLevelOptions(n.options),h=n.cpLayout&&2===+n.cpLayout&&l.width<1;return c.default.createElement("div",{className:(0,f.default)("fb_component",(0,T.getComponentType)(n)),id:n.id,style:i},c.default.createElement("div",{className:"fb_componentText",style:s?s.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),c.default.createElement("div",{className:"fb_componentBody",style:s?s.bodyStyle:null},c.default.createElement("div",{className:(0,f.default)("fbc_content_withoutGap"),style:{width:(this.isMobile()||h?100:10*(n.cpWidth||8))+"%",marginTop:s?-(0,m.getStaticData)("CP_ITEM_GAP"):null}},c.default.createElement(L,{fill:a,placeholder:n.defaultTips,inValid:r,levelOptions:d,isMobile:this.isMobile(),deviceInfo:u,onChange:this.handleChange,onBlur:this.handleBlur}))),c.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":"."}))}});n.default=M,t.exports=n["default"]},226:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function l(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}function s(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Options=n.Option=void 0;var r=function(){function t(t,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,i,a){return i&&t(n.prototype,i),a&&t(n,a),n}}(),u=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},d=i(6),h=a(d),c=i(19),p=a(c),f=i(20),m=a(f),g=i(21),v=a(g),y=i(227),I=(a(y),i(231)),b=a(I),S=i(23),E=a(S),_=i(37),C=function(t){return t?window.getComputedStyle(t,null):null},T=function(t,n){var i=t.getPropertyValue(n);return"none"!==i&&i?i:null},x=n.Option=m.default.createClass({displayName:"Option",mixins:[E.default],handleMouseEnter:function(){var t=this.props,n=t.id,i=t.onChangeCurrent;i&&i(n)},handleClick:function(e){var t=this.props,n=t.id,i=t.onChange;i&&i(e,n)},render:function(){var t=this.props,n=t.prefix,i=t.value,a=t.selected,o=t.current,l=t.role,s=t.ariaCurrentId;return m.default.createElement("li",{className:(0,p.default)(n+"-option",{"selected":a,"current":o}),role:l,"aria-current":o,id:o?s:null,onClick:this.handleClick,onMouseEnter:this.handleMouseEnter},i||" ")}}),O=n.Options=m.default.createClass({displayName:"Options",mixins:[E.default],getInitialState:function(){var t=null,n=this.props;if(n.selected){var i=[].concat(n.selected||[]);h.default.forEach(n.options,function(n){if(i.indexOf(n.id)>-1)return t=n.id,!1})}else t=n.options[0]?n.options[0].id:null;return{currentId:t,style:{}}},componentDidMount:function(){var t=this.props,n=t.autoWidth,i=t.popover,a=t.sizeFixer;if(n){var o=i.getTriggerNode(),l=C(o);this.setState({style:{width:o.clientWidth+((T(l,"border-right")>>>0)+(T(l,"border-left")>>>0)+(T(l,"padding-right")>>>0)+(T(l,"padding-left")>>>0)+a)+"px"}})}this.scrollToCurrent()},componentWillUnmount:function(){clearTimeout(this.scrollToCurrentTimer)},scrollToCurrent:function(){var t=this;this.scrollToCurrentTimer=setTimeout(function(){var n=v.default.findDOMNode(t.options);if(n){var i=n.getElementsByClassName("current")[0],a=n.clientHeight;i&&i.offsetTop>=t.options.scrollTop+a&&(t.options.scrollTop=i.offsetTop+100-a)}},300)},updateCurrentId:function(t){this.setState({currentId:t})},hoverNext:function(){var t=this.state.currentId,n=v.default.findDOMNode(this.options);if(n){var i=n.getElementsByClassName("current")[0],a=n.clientHeight,o=-1;t&&(o=this.optionIds.indexOf(t)),this.optionIds[o+1]?(t=this.optionIds[o+1],i&&i.offsetTop+50>=this.options.scrollTop+a&&(this.options.scrollTop=i.offsetTop+100-a)):(t=this.optionIds[0],this.options.scrollTop=0),this.updateCurrentId(t)}},hoverPrev:function(){var t=this.state.currentId,n=v.default.findDOMNode(this.options);if(n){var i=n.getElementsByClassName("current")[0],a=this.optionIds.indexOf(t);a>0?(t=this.optionIds[a-1],i&&i.offsetTop<=this.options.scrollTop&&(this.options.scrollTop=i.offsetTop-50)):(t=this.optionIds[this.optionIds.length-1],this.options.scrollTop=this.options.scrollHeight),this.updateCurrentId(t)}},select:function(e){null!=this.state.currentId&&this.props.onOptionChange&&this.props.onOptionChange(e,this.state.currentId)},handleMouseDown:function(e){e.preventDefault()},refOptions:function(t){this.options=t},renderOptions:function(){var t=this,n=this.props,i=n.prefix,a=n.onRenderOption,o=n.onOptionChange,l=n.currentId,s=n.options,r=n.selected,d=this.state.currentId;return this.optionIds=h.default.map(h.default.filter(s,function(t){return!t.disabled}),function(t){return t.id}),h.default.map(s,function(n){var s=n.id,h=(r||[]).indexOf(s)>-1,c=s===d;return a?a(u({prefix:i},n,{selected:h,current:c,onChangeCurrent:t.updateCurrentId,onChange:o,role:"option",ariaCurrentId:l})):m.default.createElement(x,u({key:s,prefix:i},n,{selected:h,current:c,ariaCurrentId:l,role:"option",onChange:o,onChangeCurrent:t.updateCurrentId}))})},render:function(){var t=this.props,n=t.id,i=t.prefix,a=t.optionsClassName,o=t.options,l=t.style,s=t.notFoundContent,r=(t.selected,this.state.style),u=this.state.currentId;if(!o||0===o.length)return s?m.default.createElement("ul",{ref:this.refOptions,className:(0,p.default)(i+"-options",a),role:"listbox","aria-expanded":!0,"aria-label":s,style:h.default.assign({},r,l),onMouseDown:this.handleMouseDown},m.default.createElement("li",{key:"notfound",className:(0,p.default)(i+"-option","notfound"),role:"option"},s)):null;var d="",c=h.default.find(o,{id:u});return c&&(d=c.value),m.default.createElement("ul",{ref:this.refOptions,className:(0,p.default)(i+"-options",a),id:n,"aria-live":"assertive",role:"listbox","aria-label":d,tabIndex:-1,"aria-expanded":"true",style:h.default.assign({},r,l),onMouseDown:this.handleMouseDown},this.renderOptions())}}),N={KEY_TAB:9,KEY_ENTER:13,KEY_SPACE:32,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DEL:46},L=function(){function t(){s(this,t),this._idList=[]}return r(t,[{key:"genId",value:function(){var t=void 0;do t="dpd-"+(+new Date).toString(36)+"-"+Math.round(100*Math.random());while(this._idList.indexOf(t)>-1);return t}},{key:"register",value:function(){var t=this.genId();return this._idList.push(t),t}},{key:"unregister",value:function(t){var n=this._idList.indexOf(t);return n>-1&&(this._idList=this._idList.slice(),this._idList.splice(n,1),!0)}}]),t}(),M=new L,w=m.default.createClass({displayName:"DropDown",mixins:[E.default],getDefaultProps:function(){return{prefix:"mg",disabled:!1,open:!1,placeholder:"Please select",defaultValue:null,value:null,options:[],focus:!0,autoWidth:!0,cushion:-1,onRenderOption:null,reset:!1,onReset:h.default.noop,onChange:h.default.noop,onClick:h.default.noop}},getInitialState:function(){var t=[],n=this.props;return n.value?t=t.concat(n.value):n.defaultValue&&(t=t.concat(n.defaultValue)),t=this.filterSelected(n,t),this.displayBottom=!0,this.dropdownId=M.register(),{selected:t,open:n.open}},componentWillReceiveProps:function(t){if((void 0!==t.value||void 0!==this.props.value)&&t.value!==this.props.value){var n=this.filterSelected(t,t.value);this.setState({selected:n})}},componentWillUnmount:function(){this.dropdownId&&M.unregister(this.dropdownId)},filterSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments[1];n=[].concat(n);var i=h.default.filter(h.default.uniq(n),function(t){return null!==t&&void 0!==t}).sort();return!t.multiple&&i.length>1&&(i=[i[0]]),i},open:function(){this.setState({open:!0})},close:function(){this.setState({open:!1})},handlePopoverVisibleChange:function(t){t?this.props.onClick(t):this.setState({optionsReady:!1}),this.setState({open:t})},handleOptionReady:function(){this.setState({optionsReady:!0})},handleKeyDown:function(e){var t=this.state.open,n=e.keyCode;switch(n){case N.KEY_ESC:this.close();break;case N.KEY_DOWN:if(!t){this.open();break}e.preventDefault(),this.options.hoverNext(e);break;case N.KEY_UP:if(!t){this.open();break}e.preventDefault(),this.options.hoverPrev(e);break;case N.KEY_ENTER:case N.KEY_SPACE:if(!t){this.open();break}e.preventDefault(),this.options.select(e);break;case N.KEY_TAB:this.close();break;case N.KEY_DEL:this.handleReset(e)}},handleReset:function(e){e.stopPropagation(),e.preventDefault();var t=this.props.onReset;t(e,null),this.setState({selected:null})},handleOptionChange:function(e,t){var n=this.state.selected,i=this.props,a=i.multiple,o=i.options,l=i.onChange;if(a){var s=(n||[]).indexOf(t);n=(n||[]).slice(),s>-1?n.splice(s,1):n.push(t)}else n=[t],this.close();l(e,t,h.default.map(n,function(t){return h.default.find(o,{id:t})})),this.setState({selected:n})},handlePositionUpdated:function(t){"position-bottom-left"===t.position.name&&(this.displayBottom=!0),"position-top-left"===t.position.name&&(this.displayBottom=!1)},refPopover:function(t){this.popover=t},refOptions:function(t){this.options=t},getStyle:function(t){var n=this.state.open,i=this.props.disabled;if(t&&t.default){var a=t.default;return i&&t.disabled?a=h.default.assign({},a,t.disabled):(t.focus||t.active)&&n&&(a=h.default.assign({},a,t.active,t.focus)),a}return t},getTrueOptionStyle:function(t){var n=h.default.assign({},t),i=n.borderTopColor||n.borderColor,a=n.borderBottomColor||n.borderColor;return this.displayBottom?(n.borderTopColor=i,n.borderBottomColor=a):(n.borderTopColor=a,n.borderBottomColor=i),n},getText:function(){var t=this.props.options,n=this.filterSelected(this.props,this.state.selected),i=[];return h.default.forEach(n,function(n){var a=h.default.find(t,{id:n});if(a){var o=a.value;h.default.isArray(o)&&(o=o.join("")),i.push(o)}}),h.default.trim(i.join("; "))},render:function(){var t,n=this.props,i=n.prefix,a=n.placeholder,s=n.className,r=n.disabled,d=n.onClick,h=n.focus,c=n.onFocus,f=n.onBlur,g=n.cushion,v=n.reset,I=n.style,S=n.triggerStyle,E=n.iconStyle,C=n.resetIconStyle,T=n.optionStyle,x=n.deviceInfo,N=n.onRenderContent,L=l(n,["prefix","placeholder","className","disabled","onClick","focus","onFocus","onBlur","cushion","reset","style","triggerStyle","iconStyle","resetIconStyle","optionStyle","deviceInfo","onRenderContent"]),M=this.state,w=M.selected,R=M.open,P="bb-drop",B=this.dropdownId+"-options",k=this.dropdownId+"-opt-current";return m.default.createElement(y.Popover,{ref:this.refPopover,position:x.isMobile?y.Position.FixBottom:y.Position.Auto,visible:!r&&R,cushion:g,style:this.getStyle(I),className:(0,p.default)(x.isMobile?"fixed-content":"drop-content","dropdown-option",i+"-select-content",x.isMobile?"drop-mobile":null),wrapperClassName:(0,p.default)(i+"-select",s,(t={},o(t,P+"focus",R&&!r),o(t,P+"disabled",r),t)),onVisibleChange:this.handlePopoverVisibleChange,onPositionUpdated:this.handlePositionUpdated,onPositionReady:this.handleOptionReady},m.default.createElement(b.default,{prefix:i,className:(0,p.default)({"has-reset":v}),disabled:r,focus:h,"aria-disabled":r,"aria-expanded":R&&!r,"aria-haspopup":"listbox","aria-controls":B,"aria-activedescendant":k,"aria-labelledby":L["aria-labelledby"],placeholder:a,text:this.getText(),id:this.filterSelected(this.props,this.state.selected),style:this.getStyle(S),iconStyle:this.getStyle(E),onRenderContent:N,onClick:d,onFocus:c,onBlur:f,onKeyDown:this.handleKeyDown},v&&w&&w.length>0?m.default.createElement(_.BaseBtn,{className:"iconfont "+i+"-reset fbc-select-reset",style:C,onClick:this.handleReset},String.fromCharCode(58982)):null),m.default.createElement(y.Content,{style:x.isMobile?this.getStyle(T):null},m.default.createElement(O,u({ref:this.refOptions,prefix:i,selected:w,popover:this.popover},L,{onOptionChange:this.handleOptionChange,sizeFixer:0,id:B,currentId:k,style:this.getTrueOptionStyle(this.getStyle(T))}))))}});n.default=w},227:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(30),l=a(o),s=i(228),r=a(s),u=i(230),d=i(229),h=i(31),c=i(33),p=a(c);n.default={Popover:l.default,Position:{Auto:r.default,FixTop:u.position_fix_top,FixBottom:u.position_fix_bottom,TopLeft:d.position_top_left,TopRight:d.position_top_right,BottomLeft:d.position_bottom_left,BottomRight:d.position_bottom_right},ClickTrigger:h.Click,Content:p.default},t.exports=n["default"]},228:function(t,n,i){"use strict";function a(t,n,i,a){var l=(0,o.getWindowSize)(),s=a.anchorBoundingBoxViewport,u=a.cushion,d=void 0,h=void 0;d=s.left+i.width>l.width&&s.right-i.width>0?"Right":"Left",h=s.bottom+u+i.height>l.height&&s.top-u-i.height>0?"Top":"Bottom";var c=""+h+d;return r[c].locate(t,n,i,a)}Object.defineProperty(n,"__esModule",{value:!0});var o=i(9),l=i(35),s=i(229),r={BottomLeft:s.position_bottom_left,BottomRight:s.position_bottom_right,TopLeft:s.position_top_left,TopRight:s.position_top_right},u=(0,l.createPlacement)(a);n.default=u,t.exports=n["default"]},229:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.position_bottom_right=n.position_bottom_left=n.position_top_right=n.position_top_left=void 0;var a=i(35),o=200,l=function(t,n,i,a){var l=t.left,s=t.top,r=l,u=s-i.height-a.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(r)+"px",top:Math.round(u)+"px",zIndex:o,opacity:1}},name:"position-top-left"}},s=function(t,n,i,a){var l=t.right,s=t.top,r=l-i.width,u=s-i.height-a.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(r)+"px",top:Math.round(u)+"px",zIndex:o,opacity:1}},name:"position-top-right"}},r=function(t,n,i,a){var l=t.left,s=t.bottom,r=l,u=s+a.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(r)+"px",top:Math.round(u)+"px",zIndex:o,opacity:1}},name:"position-bottom-left"}},u=function(t,n,i,a){var l=t.right,s=t.bottom,r=l-i.width,u=s+a.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(r)+"px",top:Math.round(u)+"px",zIndex:o,opacity:1}},name:"position-bottom-right"}};n.position_top_left=(0,a.createPlacement)(l),n.position_top_right=(0,a.createPlacement)(s),n.position_bottom_left=(0,a.createPlacement)(r),n.position_bottom_right=(0,a.createPlacement)(u)},230:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.position_fix_bottom=n.position_fix_top=void 0;var a=i(35),o=i(8),l=200,s=function(t,n,i,a){return{getCSSStyle:function(){return{position:"fixed",left:0,right:0,top:0,bottom:"unset",zIndex:l,opacity:1}},name:"fixed-top"}},r=navigator.userAgent.toLowerCase(),u=document.documentElement.clientHeight;window.addEventListener("orientationchange",function(){u=document.documentElement.clientHeight}),window.addEventListener("resize",function(){u=document.documentElement.clientHeight});var d=function(t,n,i,a){return{getCSSStyle:function(){return/android/.test(r)?((0,o.inIframe)()&&document.documentElement.clientHeight!==u&&(u=document.documentElement.clientHeight),{position:"fixed",left:0,right:0,top:Math.ceil(u-i.height)+"px",width:"100%",bottom:"unset",zIndex:l,opacity:1}):{position:"fixed",left:0,right:0,top:"unset",bottom:0,zIndex:l,opacity:1}},name:"fixed-bottom"}};n.position_fix_top=(0,a.createPlacement)(s),n.position_fix_bottom=(0,a.createPlacement)(d)},231:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}function l(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function s(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function r(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var u=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},d=function(){function t(t,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,i,a){return i&&t(n.prototype,i),a&&t(n,a),n}}(),h=i(19),c=a(h),p=i(20),f=a(p),m=i(227),g=(a(m),function(t){function n(){var t,i,a,o;l(this,n);for(var r=arguments.length,u=Array(r),d=0;d<r;d++)u[d]=arguments[d];return i=a=s(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(u))),a.handleMouseDown=function(e){e.preventDefault()},a.handleClick=function(e){var t=a.props,n=t.onClick,i=t.close,o=t.open,l=t.contentVisible,s=t.disabled;e.preventDefault(),l?i():s||(o(),a.focused=!0,setTimeout(function(){a.triggerField&&a.triggerField.focus()},150),n&&n(e))},a.handleFocus=function(e){var t=a.props,n=t.focus,i=t.onFocus,o=t.open,l=t.contentVisible,s=t.disabled;n&&(l||s||a.focused||(o(),i&&i(e)))},a.handleBlur=function(e){var t=a.props,n=t.focus,i=t.onBlur;t.close,t.contentVisible;n&&(e.preventDefault(),i&&i())},a.refTrigger=function(t){a.props.onTriggerRefChange&&a.props.onTriggerRefChange(t),a.triggerField=t},a.renderContent=function(){var t=a.props,n=t.text,i=t.placeholder,o=t.onRenderContent,l=t.iconStyle;return o?o(a.props):[f.default.createElement("span",{key:"content"},n||i),f.default.createElement("span",{key:"arrow",className:"iconfont fbc_selectArrow",style:l},String.fromCharCode(58983))]},o=i,s(a,o)}return r(n,t),d(n,[{key:"render",value:function(){var t=this.props,n=t.prefix,i=t.text,a=t.className,l=t.children,s=t.onKeyDown,r=t.onKeyPress,d=t.style,h=o(t,["prefix","text","className","children","onKeyDown","onKeyPress","style"]),p={};for(var m in h)h.hasOwnProperty(m)&&m.indexOf("aria-")>-1&&(p[m]=h[m]);return f.default.createElement("div",u({ref:this.refTrigger,className:(0,c.default)(n+"-dropTrigger",i?"selected":"placeholder",a),tabIndex:0,onMouseDown:this.handleMouseDown},p,{role:"combobox",onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:s,onKeyPress:r,style:d}),this.renderContent(),l)}}]),n}(m.ClickTrigger));n.default=g,t.exports=n["default"]},232:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.AfterInput=n.DropDownOption=void 0;var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l=i(20),s=a(l),r=i(6),u=a(r),d=i(19),h=a(d),c=i(118),p=a(c),f=i(23),m=a(f),g=i(226),v=a(g),y=i(17),I=i(37),b=i(55),S=i(39),E=i(100),_=a(E),C=i(8),T=s.default.createClass({displayName:"DropDownOption",mixins:[m.default],handleMouseEnter:function(){var t=this.props,n=t.id,i=t.onChangeCurrent,a=t.remaining;0!==a&&i&&i(n)},handleClick:function(e){var t=this.props,n=t.id,i=t.onChange,a=t.remaining;0!==a&&i&&i(e,n)},renderLimit:function(t){var n=this.props,i=n.showLimit,a=n.tipsStyle,o=n.isLinked,l=n.displayLinkedQuota;if(null!=t&&isFinite(t)){var r="";return(i||o&&l)&&t>0?r=(0,y.getLang)().cQuotaRemainingFunc({remaining:t}):t<=0&&(r=(0,y.getLang)().cQuotaRemainingFull),s.default.createElement("span",{className:"fbc_optionTips",style:a},r)}return null},render:function(){var t=this.props,n=t.value,i=t.current,a=t.active,o=t.hideNoQuota,l=t.onRenderOptionNum,r=t.remaining,u=t.role,d=t.ariaCurrentId,c=t.isLinked,p=t.linkLimit;if(o&&r<=0&&!c)return null;if(c&&0===p)return null;var f=l?l():null,m=r<=0&&!a;return s.default.createElement(I.BaseBtn,{component:"li",className:(0,h.default)("fbc_selectLi",{"fbc_select_current":i,"fbc_select_selected":a,"fbc_select_disabled":m}),disabled:m,role:u,"aria-current":i,id:i?d:null,onClick:this.handleClick,onMouseEnter:this.handleMouseEnter},f,n,this.renderLimit(r))}}),x=s.default.createClass({displayName:"AfterInput",mixins:[m.default],getInitialState:function(){return this.theme=(0,y.getThemeHelper)(),{}},handleStopPropagation:function(e){e.stopPropagation()},handleTextBoxChange:function(e){var t=this.props.id;this.props.onChange&&this.props.onChange(e,t,e.target.value)},render:function(){var t=this.props,n=t.className,i=t.deviceInfo,a=t.style,o=t.placeholder,l=t.value,r=t.isRequired,u=t.inputInValid;return s.default.createElement("div",{className:(0,h.default)("fbc_dropDownInputWrapper",n),style:a},s.default.createElement(_.default,{className:(0,h.default)("fbc_input","fbc_optionInput",{"error":u}),deviceInfo:i,tabIndex:0,value:l,placeholder:o||(0,y.getLang)().cFillingPlaceholder,style:this.theme.getInputBoxStyle(),inputStyle:this.theme.getInputBoxExtraStyle(),onTouchStart:this.handleStopPropagation,onMouseDown:this.handleStopPropagation,onKeyDown:this.handleStopPropagation,onClick:this.handleStopPropagation,onChange:this.handleTextBoxChange},r?s.default.createElement("span",{className:"fbc_required",style:this.theme.getInputBoxExtraStyle()},"*"):null),s.default.createElement("div",{className:"clearB"}))}}),O=s.default.createClass({displayName:"DropDown",mixins:[p.default,m.default],getInitialState:function(){return this.theme=(0,y.getThemeHelper)(),this.store=(0,y.getStore)(),{}},hasValue:function(t){var n=this.props.fill,i=!1;return u.default.forEach(n||[],function(n){if(t===n||u.default.isPlainObject(n)&&n.id===t)return i=!0,!1}),i},getFillId:function(){var t=this.props.fill,n=u.default.filter(u.default.map(t,function(t){return t?u.default.isPlainObject(t)?t.id:t:null}));return u.default.isEmpty(n)?null:n},getFillInfo:function(){var t=this,n=this.props.fill,i=null;return u.default.forEach(n||[],function(n){var a=void 0,o=void 0;if(n)return u.default.isPlainObject(n)?(a=n.id,o=n.value):(a=n,o=null),i={id:a,value:o,opt:u.default.find(t.options(),{sId:a})},!1}),i},handleSelectOption:function(e,t){var n=this.props,i=n.data,a=n.fill;a&&a.indexOf(t)>-1||this.store.dispatch((0,S.SELECT_OPT)({id:i.id,value:t}))},handleResetOption:function(){var t=this.props.data;this.store.dispatch((0,S.SELECT_OPT)({id:t.id,value:null}))},handleStopPropagation:function(e){e.stopPropagation()},handleSetOptionInputValue:function(e,t,n){var i=this.props.data;this.store.dispatch((0,S.SET_OPT_EXT_VALUE)({id:i.id,data:{optId:t,value:n}}))},options:function(){var t=this.props,n=t.data,i=t.linkedApt,a=t.linkQuota,o=t.linkLimit,l=t.displayLinkedQuota;return this.memoOptions||(this.memoOptions=(0,C.memo)(this._options)),this.memoOptions(n,i,a,o,l)},_options:function(t,n,i,a,o){var l=[],s=null;t.isLimitOptions&&t.optionsQuotaInfo&&(s=t.optionsQuotaInfo);var r=!(!n||!i);if(u.default.forEach(t.options,function(t){var u=s&&s[t.sId]?s[t.sId]:null,d=null,h=null;r&&(d=i[t.sId]),n&&a&&(h=a[t.sId]);var c=1/0;if(u||r&&null!=i){var p=(0,C.quotaCalculate)(u,d);c=p.remaining}l.push({sId:t.sId,id:t.sId,_id:t.id,value:t.value,remaining:c,disabled:c<=0,isLinked:r,linkLimit:h,displayLinkedQuota:o})}),t.isAddOtherOption){var d=s&&s[t.otherId]?s[t.otherId]:null,h=null,c=null;r&&(h=i[t.otherId]),n&&a&&(c=a[t.otherId]);var p=1/0;if(d||r&&null!=i){var f=(0,C.quotaCalculate)(d,h);p=f.remaining}l.push({sId:t.otherId,id:t.otherId,_id:-1,value:t.otherOptionTitle||(0,y.getLang)().cOptionOtherDefault,afterInput:!0,isRequired:t.otherOptionIsRequired,remaining:p,disabled:p<=0,isLinked:r,linkLimit:c})}return l},renderOption:function(t){var n=this.props.data,i=this.hasValue(t.sId),a={showLimit:n.isShowOptionLimit,hideNoQuota:n.isHideFullOption,active:i,tipsStyle:this.theme.getComponentTipsStyle()};return s.default.createElement(T,o({},t,{key:t.sId},a))},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,l=t.layout,r=t.linkedApt,u=(0,y.getDeviceInfo)();this.optionNum=0;var d=this.getComponentLayoutStyleInfo(),c=a&&a.length>0,p=o&&o.length>0,f=this.options(),m=this.getFillInfo(),g=m&&m.opt&&m.opt.afterInput,I=this.hasError("inputRequired"),S=n.cpLayout&&2===+n.cpLayout&&l.width<1;return s.default.createElement("div",{className:(0,h.default)("fb_component",(0,b.getComponentType)(n)),id:n.id,style:i},s.default.createElement("div",{className:"fb_componentText",style:d?d.titleStyle:null},this.renderTitle(r?null:this.theme.getComponentTitleStyle()),this.renderSubtitle(r?null:this.theme.getComponentDescStyle()),this.renderError(this.theme.getComponentErrorStyle())),s.default.createElement("div",{className:"fb_componentBody",style:d?d.bodyStyle:null},s.default.createElement("div",{className:(0,h.default)("fbc_content","fbc_widthCp",{"has-input":g}),style:{width:(this.isMobile()||S?100:10*(n.cpWidth||8))+"%",marginTop:d?0:null}},s.default.createElement(v.default,{className:(0,h.default)("fbc_select",{hasValue:c,error:p}),optionsClassName:(0,h.default)("fbc_options"),deviceInfo:u,placeholder:n.defaultTips,value:this.getFillId(),options:f,reset:!0,style:r?null:{default:c?this.theme.getInputBoxStyle(this.theme.NORMAL):this.theme.getInputBoxStyle(this.theme.PLACEHOLDER),active:c?this.theme.getInputBoxStyle(this.theme.ACTIVE):this.theme.getInputBoxStyle(this.theme.PLACEHOLDER)},triggerStyle:this.theme.getInputBoxTriggerStyle(),iconStyle:r?null:{default:this.theme.getDropDownTriggerIconStyle(this.theme.NORMAL),active:this.theme.getDropDownTriggerIconStyle(this.theme.ACTIVE)},resetIconStyle:r?null:{default:this.theme.getDropDownResetIconStyle(this.theme.NORMAL),hover:this.theme.getDropDownResetIconStyle(this.theme.HOVER),active:this.theme.getDropDownResetIconStyle(this.theme.ACTIVE)},optionStyle:r?null:this.theme.getDropDownOptionMenuStyle(),onRenderOption:this.renderOption,onReset:this.handleResetOption,onChange:this.handleSelectOption}),g?s.default.createElement(x,{value:m.value,id:m.id,inputInValid:I&&I.info.indexOf(m.id)>-1,deviceInfo:u,isRequired:m.opt.isRequired,onChange:this.handleSetOptionInputValue}):null),s.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=O,n.DropDownOption=T,n.AfterInput=x},253:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(20),l=a(o),s=i(23),r=a(s),u=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},d=function(t,n){return t.x*n.x+t.y*n.y},h=function(t,n){var i=u(t)*u(n);if(0===i)return 0;var a=d(t,n)/i;return a>1&&(a=1),Math.acos(a)},c=function(t,n){return t.x*n.y-n.x*t.y},p=function(t,n){var i=h(t,n);return c(t,n)>0&&(i*=-1),180*i/Math.PI},f=l.default.createClass({displayName:"BaseFinger",mixins:[r.default],getInitialState:function(){return this.preTapPosition={x:null,y:null},this.preV={x:0,y:0},{}},_emitEvent:function(t){if(this.props[t]){for(var n,i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];(n=this.props)[t].apply(n,a)}},_cancelLongTap:function(){clearTimeout(this.longTapTimeout)},_cancelSingleTap:function(){clearTimeout(this.singleTapTimeout)},_swipeDirection:function(t,n,i,a){return Math.abs(t-n)>80||this.end-this.now<250?Math.abs(t-n)>=Math.abs(i-a)?t-n>0?"LEFT":"RIGHT":i-a>0?"UP":"DOWN":"NO_CHANGE"},handleTouchStart:function(e){var t=this;if(this._emitEvent("onTouchStart",e),e.touches){this.now=+new Date,this.x1=e.touches[0].pageX,this.y1=e.touches[0].pageY,this.delta=this.now-(this.last||this.now),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var n=this.preV,i=e.touches.length;if(i>1){this._cancelLongTap(),this._cancelSingleTap();var a={x:e.touches[1].pageX-this.x1,y:e.touches[1].pageY-this.y1};n.x=a.x,n.y=a.y,this.pinchStartLen=u(n),this._emitEvent("onMultipointStart",e)}else this.isSingleTap=!0;this.longTapTimeout=setTimeout(function(){t._emitEvent("onLongTap",e),t.afterLongTap=!0,t.afterLongTapTimeout=setTimeout(function(){t.afterLongTap=!1},1e3)},750)}},handleTouchMove:function(e){this._emitEvent("onTouchMove",e);var t=this.preV,n=e.touches.length,i=e.touches[0].pageX,a=e.touches[0].pageY;if(this.isSingleTap=!1,this.isDoubleTap=!1,n>1){var o={x:e.touches[1].pageX-i,y:e.touches[1].pageY-a};null!==t.x&&(this.pinchStartLen>0&&(e.center={x:(e.touches[1].pageX+i)/2,y:(e.touches[1].pageY+a)/2},e.scale=e.zoom=u(o)/this.pinchStartLen,this._emitEvent("onPinch",e)),
e.angle=p(o,t),this._emitEvent("onRotate",e)),t.x=o.x,t.y=o.y,this.multiTouch=!0}else null!==this.x2?(e.deltaX=i-this.x2,e.deltaY=a-this.y2):(e.deltaX=0,e.deltaY=0),this._emitEvent("onPressMove",e);this._cancelLongTap(),this.x2=i,this.y2=a,n>1&&e.preventDefault()},handleTouchCancel:function(e){this._emitEvent("onTouchCancel",e),clearInterval(this.singleTapTimeout),clearInterval(this.tapTimeout),clearInterval(this.longTapTimeout),clearInterval(this.swipeTimeout)},handleTouchEnd:function(e){var t=this;this._emitEvent("onTouchEnd",e),this.end=+new Date,this._cancelLongTap(),this.multiTouch===!0&&e.touches.length<2&&this._emitEvent("onMultipointEnd",e),e.origin=[this.x1,this.y1],this.multiTouch===!1&&(this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(e.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),e.distance=Math.abs(this.x1-this.x2),this.swipeTimeout=setTimeout(function(){t._emitEvent("onSwipe",e)},0)):this.afterLongTap?(clearTimeout(this.afterLongTapTimeout),this.afterLongTap=!1):this.tapTimeout=setTimeout(function(){t._emitEvent("onTap",e),t.isDoubleTap?(t._emitEvent("onDoubleTap",e),clearTimeout(t.singleTapTimeout),t.isDoubleTap=!1):t.isSingleTap&&(t.singleTapTimeout=setTimeout(function(){t._emitEvent("onSingleTap",e)},250),t.isSingleTap=!1)},0)),this.preV.x=0,this.preV.y=0,this.scale=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null,this.multiTouch=!1},render:function(){return l.default.cloneElement(l.default.Children.only(this.props.children),{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchCancel:this.handleTouchCancel,onTouchEnd:this.handleTouchEnd})}});n.default=f,t.exports=n["default"]},261:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}Object.defineProperty(n,"__esModule",{value:!0}),n.InputGroupItem=void 0;var l=i(20),s=a(l),r=i(118),u=a(r),d=i(23),h=a(d),c=i(19),p=a(c),f=i(100),m=a(f),g=i(17),v=i(37),y=i(6),I=a(y),b=i(8),S=s.default.createClass({displayName:"InputGroupItem",mixins:[h.default],getInitialState:function(){return this.theme=(0,g.getThemeHelper)(),{}},handleIncrease:function(e){var t=this.props,n=t.idx,i=t.onIncrease;i&&i(e,n)},handleRemove:function(e){var t=this.props,n=t.idx,i=t.onRemove;i&&i(e,n)},handleChange:function(e){var t=this.props,n=t.idx,i=t.onChange;i&&i(e,n)},handleBlur:function(e){var t=this.props,n=t.idx,i=t.onBlur;i&&i(e,n)},render:function(){var t=this.props,n=t.className,i=t.icon,a=t.placeholder,l=t.inValid,r=t.limit,u=t.idx,d=t.total,h=t.value,c=t.hasError,f=t.deviceInfo,g=o(t,["className","icon","placeholder","inValid","limit","idx","total","value","hasError","deviceInfo"]),y=d===r,b=!1;if(l){var S=c("contentRegex");if(S&&I.default.isPlainObject(S)){if(S.info){var E=S.info.errorContent||[];b=E.indexOf(h)>-1}}else b=!0}return s.default.createElement(m.default,{className:(0,p.default)("fbc_input","fbc_content_item",n,{error:b}),deviceInfo:f,tabIndex:0,inValid:b,"aria-labelledby":g["aria-labelledby"],icon:i,"aria-invalid":b,style:this.theme.getInputBoxStyle(this.theme.NORMAL,!!i),inputStyle:this.theme.getInputBoxExtraStyle(),iconStyle:{default:this.theme.getInputBoxIconStyle(this.theme.NORMAL),active:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxIconStyle(this.theme.ACTIVE),error:this.theme.getInputBoxIconStyle(this.theme.ERROR)},value:h||"",placeholder:a,onChange:this.handleChange,onBlur:this.handleBlur},s.default.createElement("span",{className:"fbc_imOperate"},d>1?s.default.createElement(v.BaseBtn,{component:"a",className:"iconfont fbc_removeIcon",style:{default:this.theme.getInputBoxOptIconStyle(this.theme.NORMAL,{isRemove:!0}),hover:this.theme.getInputBoxOptIconStyle(this.theme.HOVER,{isRemove:!0}),active:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE,{isRemove:!0}),focus:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE,{isRemove:!0})},onClick:this.handleRemove},String.fromCharCode(58980)):null,d!==u+1||y?null:s.default.createElement(v.BaseBtn,{component:"a",className:"iconfont fbc_addIcon",style:{default:this.theme.getInputBoxOptIconStyle(this.theme.NORMAL),hover:this.theme.getInputBoxOptIconStyle(this.theme.HOVER),active:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE),focus:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE)},onClick:this.handleIncrease},String.fromCharCode(58979))))}});n.InputGroupItem=S;var E=s.default.createClass({displayName:"InputGroup",mixins:[u.default,h.default],getInitialState:function(){return this.theme=(0,g.getThemeHelper)(),this.getGroupFill=(0,b.memo)(this._getGroupFill),{}},_getGroupFill:function(t){return I.default.isArray(t)?t:[t]},handleIncrease:function(e,t){this.props.onIncreaseItem&&this.props.onIncreaseItem(e,t)},handleRemove:function(e,t){this.props.onRemoveItem&&this.props.onRemoveItem(e,t)},render:function(){for(var t=this.props,n=t.fill,i=t.data,a=t.inValid,o=t.valid,l=t.deviceInfo,r=t.limit,u=t.fieldExtInfo,d=t.onChange,h=t.onBlur,c=t.ariaTriggerOrder,p=[],f=this.getGroupFill(n),m=Math.max(1,f?f.length:1),g=0;g<m;g++)p.push(s.default.createElement(S,{key:"contentItem"+g,deviceInfo:l,hasError:this.hasError,placeholder:i.placeholder,inValid:a,valid:o,"aria-labelledby":0===g?c:null,idx:g,total:m,limit:r,value:f&&f[g],icon:u?u.icon:null,onIncrease:this.handleIncrease,onRemove:this.handleRemove,onChange:d,onBlur:h}));return s.default.createElement("div",{className:"fbc_content_groupList"},p)}});n.default=E},262:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l=i(6),s=a(l),r=i(20),u=a(r),d=i(118),h=a(d),c=i(23),p=a(c),f=i(17),m=i(39),g=i(19),v=a(g),y=i(263),I=i(37),b=i(27),S=(a(b),i(124)),E=u.default.createClass({displayName:"PicAttachmentItem",mixins:[p.default],getInitialState:function(){return this.theme=(0,f.getThemeHelper)(),{previewImage:null}},componentDidMount:function(){this.setPreviewImage()},componentDidUpdate:function(){this.setPreviewImage()},setPreviewImage:function(){var t=this;this.props.value&&this.props.value.getPreview&&this.props.value.getPreview().then(function(n){t.state.previewImage!==n&&t.setState({previewImage:n})},function(){t.setState({previewImage:null})})},handleStartUpload:function(e){var t=this.props,n=t.index,i=t.onClick;e.stopPropagation(),e.preventDefault(),i&&i(e,n)},handleRemove:function(e){var t=this.props,n=t.index,i=t.onRemove;e.stopPropagation(),e.preventDefault(),i&&i(e,n)},handleDisplayStateChange:function(t){this.setState({contentHover:t.hover})},render:function(){var t=this.props,n=t.empty,i=t.data,a=t.value,o=(t.contentWidth,t.processing),l=t.inValidNormal,s=t.inValidSize,r=t.inValidResolution,d=this.state,h=(d.contentHover,d.previewImage),c=(0,S.isMini)()?5:(0,S.isLegacy)()?500:10,p=i.isLimitFileSize&&i.fileSize?i.fileSize:c,m=(0,f.getLang)(),g=null,y=null,b=l||r||s;if(n||b){var E=null;l?E=m.cUploadFailedILLEGAL_SUFFIX:s?E=m.cUploadFailedILLEGAL_FILE_SIZE({fileSize:p}):r&&(E=m.cUploadFailedILLEGAL_FILE_RESOLUTION),y=b?58938:58997,g=u.default.createElement("div",{className:"fbc_paItem_wrapper"},u.default.createElement("div",{className:"fbc_paImgPlaceholder"},u.default.createElement("i",{className:"iconfont fbc_paImgState"},String.fromCharCode(y))),b?u.default.createElement("div",{className:"fbc_paContentInfo fbc_paError",key:"error"},u.default.createElement("div",{className:(0,v.default)("fbc_paAddTips",{error:b})},E)):u.default.createElement("div",{className:"fbc_paContentInfo",key:"content"},u.default.createElement("div",{className:"fbc_paAddTitle"},m.cPicAttachmentAddTitle),u.default.createElement("div",{className:"fbc_paAddTips"},m.cPicAttachmentAddTips({max:p}))))}else a&&(g=u.default.createElement("div",{className:"fbc_paImgPreview"},u.default.createElement("span",{className:"fbc_reUploadBtn"},m.cPicAttachmentReload),h?u.default.createElement("div",{className:"fbc_selectedImage fbc_selectedImagePreview",style:{backgroundImage:"url("+h+")"}}):u.default.createElement("div",{className:"fbc_selectedImage fbc_selectedImagePreview",style:{backgroundImage:"url("+window.rootPath("./images/form/IE8_ImgUploadSuccess.png")+")"}})));return u.default.createElement(I.BaseBtn,{component:"li",className:(0,v.default)("fbc_uploadImage","fbc_paItem ",{"is_empty":n,"has_value":a,error:b}),disabled:o,inValid:b,style:null,onClick:this.handleStartUpload,onStateChange:this.handleDisplayStateChange},u.default.createElement("div",{className:"fbc_uploadContent",style:this.theme.getTextareaBoxStyle()},g),u.default.createElement("span",{className:"fbc_imOperate"},a?u.default.createElement(I.BaseBtn,{component:"a",className:"iconfont fbc_removeImgIcon",disabled:o,onClick:this.handleRemove},String.fromCharCode(58982)):null))}}),_=u.default.createClass({displayName:"PicAttachment",mixins:[h.default,p.default],getInitialState:function(){return this.theme=(0,f.getThemeHelper)(),this.store=(0,f.getStore)(),{processing:!1}},componentDidMount:function(){this.unsubscribe=this.store.addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe&&this.unsubscribe()},handleStateChange:function(t){t.type===m._SET_FILE_DONE&&this._setFileUnLock()},_setFileUnLock:function(){var t=this;setTimeout(function(){t.setState({processing:!1})},100)},handleChange:function(e,t){var n=this.props.data,i=this.state.processing;i||(this.setState({processing:!0}),this.store.dispatch((0,m.SET_FILE)(o({id:n.id},t,{preview:!0}))))},handleRemove:function(e,t){var n=this.props.data;this.store.dispatch((0,m.REMOVE_FILE)(o({id:n.id},t)))},renderTips:function(t){var n=this.props,i=n.data,a=(n.fill,n.valid),o=null,l=a&&(this.hasError("attachmentResolution")||this.hasError("attachmentType"));if(1===i.isLimitPicResolution){if(o=[],i.picMinWidth||i.picMaxWidth){var r="";i.picMinWidth&&i.picMaxWidth?r=i.picMinWidth+"px~"+i.picMaxWidth+"px":i.picMinWidth?r=">"+i.picMinWidth+"px":i.picMaxWidth&&(r="<"+i.picMaxWidth+"px"),o.push((0,f.getLang)().cPicAttachmentTipsWidth({value:r}))}if(i.picMinHeight||i.picMaxHeight){var d="";i.picMinHeight&&i.picMaxHeight?d=i.picMinHeight+"px~"+i.picMaxHeight+"px":i.picMinHeight?d=">"+i.picMinHeight+"px":i.picMaxHeight&&(d="<"+i.picMaxHeight+"px"),o.push((0,f.getLang)().cPicAttachmentTipsHeight({value:d}))}o&&!s.default.isEmpty(o)&&(o=(0,f.getLang)().cPicAttachmentTips({resolution:", "+o.join(", ")}))}else o=(0,f.getLang)().cPicAttachmentTips({resolution:""});return o?u.default.createElement("p",{className:(0,v.default)("fbc_tips",{error:l}),key:"tips",id:"tip-"+i.id,style:t,"aria-label":o},o):null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,l=(t.layout,this.state.processing),s=this.getComponentLayoutStyleInfo(),r=o&&o.length>0;return u.default.createElement("div",{className:(0,v.default)("fb_component",n.type),id:n.id,style:i},u.default.createElement("div",{className:"fb_componentText",style:s?s.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),u.default.createElement("div",{className:"fb_componentBody",style:s?s.bodyStyle:null},u.default.createElement("div",{className:(0,v.default)("fbc_content"),style:{marginTop:s?0:null}},u.default.createElement(y.AttachmentGroup,{data:n,fill:a,valid:o,inValid:r,processing:l,component:E,contentWidth:this.getContentWidth(),onChange:this.handleChange,onRemove:this.handleRemove})),u.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=_,t.exports=n["default"]},263:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.AttachmentGroup=void 0;var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l=i(20),s=a(l),r=i(21),u=a(r),d=i(6),h=a(d),c=i(19),p=a(c),f=i(118),m=a(f),g=i(23),v=a(g),y=i(17),I=i(37),b=i(39),S=i(8),E=i(130),_=i(124),C=s.default.createClass({displayName:"AttachmentItem",mixins:[v.default],getInitialState:function(){return this.theme=(0,y.getThemeHelper)(),{}},handleStartUpload:function(e){var t=this.props,n=t.index,i=t.onClick;e.stopPropagation(),e.preventDefault(),i&&i(e,n)},handleRemove:function(e){var t=this.props,n=t.index,i=t.onRemove;e.stopPropagation(),e.preventDefault(),i&&i(e,n)},handleDisplayStateChange:function(t){this.setState({contentHover:t.hover})},render:function(){var t=this.props,n=t.empty,i=t.data,a=t.value,o=t.contentWidth,l=t.processing,r=t.inValidNormal,u=t.inValidSize,d=t.inValidResolution,h=this.state.contentHover,c=(0,_.isMini)()?5:(0,_.isLegacy)()?500:10,f=i.isLimitFileSize&&i.fileSize?i.fileSize:c,m=null,g=null,v=null,b=r||d||u;if(n)m=(0,y.getLang)().cFileSizeHint({fileSize:f}),g=58979,v=this.theme.getInputBoxFileIconStyle(this.theme.NORMAL),h&&(v=this.theme.getInputBoxFileIconStyle(this.theme.HOVER));else if(a)if(b){var E=o*(i.cpWidth||8)/10-220,C=null;r?C=(0,y.getLang)().cUploadFailedILLEGAL_SUFFIX:u?C=(0,y.getLang)().cUploadFailedILLEGAL_FILE_SIZE({fileSize:f}):d&&(C=(0,y.getLang)().cUploadFailedILLEGAL_FILE_RESOLUTION),m=s.default.createElement("span",{key:"upload_content",className:"fbc_ufText"},s.default.createElement("span",{className:"fbc_ufTitle"},C),s.default.createElement("span",{className:"fbc_ufSize",title:a.name},(0,S.fileNameBeauty)(a.name,E))),g=58938,v=this.theme.getInputBoxFileIconStyle(this.theme.ERROR)}else{var T=o*(i.cpWidth||8)/10-150;m=s.default.createElement("span",{key:"upload_content",className:"fbc_ufText"},s.default.createElement("span",{className:"fbc_ufTitle",title:a.name},(0,S.fileNameBeauty)(a.name,T)),s.default.createElement("span",{className:"fbc_ufSize"},a.size?(0,S.fileSizeBeauty)(a.size):null)),g=58988,v=this.theme.getInputBoxFileIconStyle(this.theme.ACTIVE)}return s.default.createElement(I.BaseBtn,{component:"li",className:(0,p.default)("fbc_uploadFile",{"is_empty":n,"has_value":a,error:b}),disabled:l,inValid:b,style:this.theme.getInputBoxStyle(this.theme.NORMAL,!0),onClick:this.handleStartUpload,onStateChange:this.handleDisplayStateChange},s.default.createElement(I.BaseBtn,{component:"i",className:"iconfont fbi_icon",style:v},String.fromCharCode(g)),s.default.createElement("div",{className:"fbc_uploadContent",style:a?this.theme.getTextareaBoxStyle(this.theme.NORMAL):this.theme.getTextareaBoxStyle(this.theme.PLACEHOLDER)},m),s.default.createElement("span",{className:"fbc_imOperate"},a?s.default.createElement(I.BaseBtn,{component:"a",className:"iconfont fbc_removeIcon",disabled:l,style:{default:this.theme.getInputBoxOptIconStyle(this.theme.NORMAL,{isRemove:!0}),hover:this.theme.getInputBoxOptIconStyle(this.theme.HOVER,{isRemove:!0}),active:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE,{isRemove:!0}),focus:this.theme.getInputBoxOptIconStyle(this.theme.ACTIVE,{isRemove:!0})},onClick:this.handleRemove},String.fromCharCode(58980)):null))}}),T=n.AttachmentGroup=s.default.createClass({displayName:"AttachmentGroup",mixins:[m.default,v.default],getInitialState:function(){return this.theme=(0,y.getThemeHelper)(),this.store=(0,y.getStore)(),this.uploadPosition=null,{}},handleFileChange:function(e){var t=this,n=this.props,i=n.data,a=n.fill,o=n.onChange,l=e.target.files;if(l&&l.length>0&&null!=this.uploadPosition){var s=[],r=0,d=a&&a[this.uploadPosition];h.default.forEach(l,function(n){i.isAcceptMultipleFile&&i.isLimitFileNumber&&i.fileNumber&&r+t.curentFileNum-(d?1:0)>=i.fileNumber||(r++,s.push(n))}),o&&o(e,{index:this.uploadPosition,files:s}),this.uploadPosition=null,u.default.findDOMNode(this.file).value=""}},handleFileRemove:function(e,t){var n=this.props.onRemove;n&&n(e,{index:t})},handleTriggerUploader:function(e,t){this.uploadPosition=t,u.default.findDOMNode(this.file).click()},refFile:function(t){this.file=t},_checkInValidState:function(t,n){var i=this.hasError(t);return!!i&&i.info.errorContent.indexOf(n)>-1},renderBox:function(){var t=this,n=this.props,i=n.data,a=n.fill,l=n.contentWidth,r=n.component,u=n.processing,d=0,c=[],p={data:i,processing:u,contentWidth:l,onClick:this.handleTriggerUploader,onRemove:this.handleFileRemove};return a&&a.length>0&&h.default.forEach(a,function(n,i){var a=!1,l=void 0,u=void 0;h.default.forEach(["attachmentIllegal","attachmentType"],function(i){var o=t._checkInValidState(i,n.name);if(o)return a=!0,!1}),l=t._checkInValidState("attachmentSize",n.name),u=t._checkInValidState("attachmentResolution",n.name),c.push(s.default.createElement(r,o({key:"file"+i},p,{index:d,value:n,inValidNormal:a,inValidSize:l,inValidResolution:u}))),d++}),this.curentFileNum=d,(!i.isAcceptMultipleFile&&0===d||i.isAcceptMultipleFile&&(!i.isLimitFileNumber||i.isLimitFileNumber&&(!i.fileNumber||i.fileNumber&&d<i.fileNumber)))&&c.push(s.default.createElement(r,o({key:"fileEmpty",empty:!0},p,{index:d}))),c},render:function(){var t=this.props.data;return s.default.createElement("div",{className:"fbc_attachment_wrapper"},s.default.createElement("ul",{className:"fbc_awList clear"},this.renderBox()),s.default.createElement("input",{className:"fbc_uploadWorker",type:"file",ref:this.refFile,multiple:1===t.isAcceptMultipleFile,onChange:this.handleFileChange}))}}),x=s.default.createClass({displayName:"Attachment",mixins:[m.default,v.default],getInitialState:function(){return this.theme=(0,y.getThemeHelper)(),this.store=(0,y.getStore)(),{processing:!1}},componentDidMount:function(){this.unsubscribe=this.store.addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe&&this.unsubscribe()},handleStateChange:function(t){t.type===b._SET_FILE_DONE&&this._setFileUnLock()},_setFileUnLock:function(){var t=this;setTimeout(function(){t.setState({processing:!1})},100)},handleChange:function(e,t){var n=this.props.data,i=this.state.processing;i||(this.setState({processing:!0}),this.store.dispatch((0,b.SET_FILE)(o({id:n.id},t,{preview:!1}))))},handleRemove:function(e,t){var n=this.props.data;this.store.dispatch((0,b.REMOVE_FILE)(o({id:n.id},t)))},renderTips:function(t){var n=this.props,i=n.data,a=(n.fill,n.valid);if(1===i.isLimitFileType&&!h.default.isEmpty(i.fileTypes)){var o=a&&this.hasError("attachmentType"),l=[];h.default.forEach(E.ATTACHMENT_TYPE_LIST,function(t,n){i.fileTypes.indexOf(n)>-1&&l.push(t)});var r=(0,y.getLang)().cFileSupportFunc({fileTypes:l.join(", ")});return s.default.createElement("p",{className:(0,p.default)("fbc_tips",{error:o}),key:"tips",id:"tip-"+i.id,style:t,"aria-label":r},r)}return null},render:function(){var t=this.props,n=t.data,i=t.style,a=t.fill,o=t.valid,l=t.layout,r=this.state.processing,u=this.getComponentLayoutStyleInfo(),d=o&&o.length>0,h=n.cpLayout&&2===+n.cpLayout&&l.width<1;return s.default.createElement("div",{className:(0,p.default)("fb_component",n.type),id:n.id,style:i},s.default.createElement("div",{className:"fb_componentText",style:u?u.titleStyle:null},this.renderTitle(this.theme.getComponentTitleStyle()),this.renderSubtitle(this.theme.getComponentDescStyle()),this.renderTips(this.theme.getComponentTipsStyle()),this.renderError(this.theme.getComponentErrorStyle())),s.default.createElement("div",{className:"fb_componentBody",style:u?u.bodyStyle:null},s.default.createElement("div",{className:(0,p.default)("fbc_content","fbc_widthCp"),style:{width:(this.isMobile()||h?100:10*(n.cpWidth||8))+"%",marginTop:u?0:null}},s.default.createElement(T,{data:n,fill:a,valid:o,inValid:d,processing:r,component:C,contentWidth:this.getContentWidth(),onChange:this.handleChange,onRemove:this.handleRemove})),s.default.createElement("span",{className:"aria-placeholder",id:"p-"+n.id,"aria-label":(n.placeholder||"")+"."})))}});n.default=x},280:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var i={};for(var a in t)n.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}Object.defineProperty(n,"__esModule",{value:!0});var l=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=function(){function t(t,n){var i=[],a=!0,o=!1,l=void 0;try{for(var s,r=t[Symbol.iterator]();!(a=(s=r.next()).done)&&(i.push(s.value),!n||i.length!==n);a=!0);}catch(t){o=!0,l=t}finally{try{!a&&r["return"]&&r["return"]()}finally{if(o)throw l}}return i}return function(n,i){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=i(19),u=a(r),d=i(20),h=a(d),c=i(21),p=a(c),f=i(23),m=a(f),g=i(34),v=a(g),y=i(36),I=a(y),b=i(29),S=a(b),E=i(38),_=a(E),C=i(8),T=i(17),x=i(281),O=a(x),N=i(37),L=i(253),M=a(L),w=(0,S.default)((0,_.default)((0,I.default)(v.default))),R=function(t){return{left:Math.round(t.left),top:Math.round(t.top),width:Math.round(t.width),height:Math.round(t.height)}},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return new Promise(function(n){window.setTimeout(function(){n(!0)},t)})},B=h.default.createClass({displayName:"PreviewImage",mixins:[m.default],getInitialState:function(){return{visible:!1,displayScale:1,displayOffset:[0,0]}},preview:function(t,n,i){var a=this,o=p.default.findDOMNode(t),l=R(o.getBoundingClientRect());this.setState({visible:!0,originalPlace:l,image:n,position:l}),Promise.all([P(300),(0,C.getImageSize)(i)]).then(function(t){var n=s(t,2),o=(n[0],n[1]),l=(0,T.getDeviceInfo)(),r=l.getClientWidth(),u=l.getClientHeight(),d=1;.8*u<o.height&&(d=Math.min(.8*u/o.height,d)),.8*r<o.width&&(d=Math.min(.8*r/o.width,d));var h={left:Math.round((r-o.width*d)/2),top:Math.round((u-o.height*d)/2),width:Math.round(o.width*d),height:Math.round(o.height*d)};a.setState({image:i,position:h})})},handleClose:function(){var t=this;this.setState({position:this.state.originalPlace,displayScale:1,displayOffset:[0,0]},function(){t.setState({visible:!1})})},handlePinch:function(e){e.stopPropagation(),this.setState({displayScale:Math.max(Math.min(1.5,e.scale),.5)})},handleMove:function(e){e.stopPropagation();var t=this.state.displayOffset,n=isNaN(e.deltaX)?0:e.deltaX,i=isNaN(e.deltaY)?0:e.deltaY;this.setState({displayOffset:[t[0]+n,t[1]+i]})},handleWheel:function(e){e.stopPropagation();var t=void 0,n=void 0;"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),t=10*n,"deltaY"in e&&(t=e.deltaY),t&&e.deltaMode&&(t*=1==e.deltaMode?40:800),t<-30&&this.setState({displayScale:Math.min(1.5,this.state.displayScale+.05)}),t>30&&this.setState({displayScale:Math.max(.5,this.state.displayScale-.05)})},render:function(){var t=this.props,n=t.className,i=o(t,["className"]),a=this.state,s=a.visible,r=a.image,d=a.position,c=a.displayScale,p=a.displayOffset,f=l({},d,{transform:"scale("+c+") translate("+p.map(function(t){return(t||0)+"px"})+")"});return h.default.createElement(w,l({className:(0,u.default)("cp-popwin","cp-pop-preview",n),visible:s,onClickAway:this.handleClose,onClose:this.handleClose},i),h.default.createElement("div",{className:"cp-previewBox"},h.default.createElement(M.default,{onPinch:this.handlePinch,onPressMove:this.handleMove},h.default.createElement("img",{className:"cp-preview-image",src:r,style:f,onWheel:this.handleWheel})),h.default.createElement(N.BaseBtn,{component:"div",className:"cp-preview-close"},h.default.createElement(O.default,{className:"cpp-close",onClick:this.handleClose}))))}});n.default=B,t.exports=n["default"]},281:function(t,n,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l=i(20),s=a(l),r=function(t){return s.default.createElement("svg",o({viewBox:"0 0 24 24"},t),s.default.createElement("g",null,s.default.createElement("path",{d:"M13.414 12l5.793-5.793c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0L12 10.586 6.207 4.793c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L10.586 12l-5.793 5.793c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293L12 13.414l5.793 5.793c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L13.414 12z"})))};n.default=r,t.exports=n["default"]}});